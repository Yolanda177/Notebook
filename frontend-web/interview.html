<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>常见问题 1 | Yolanda</title>
    <meta name="description" content="每天学习一点点">
    <link rel="icon" href="/Notebook/images/mylogo.jpg">
    
    <link rel="preload" href="/Notebook/assets/css/0.styles.4f932b82.css" as="style"><link rel="preload" href="/Notebook/assets/js/app.fae3116e.js" as="script"><link rel="preload" href="/Notebook/assets/js/3.8a90166b.js" as="script"><link rel="preload" href="/Notebook/assets/js/21.8d087c07.js" as="script"><link rel="prefetch" href="/Notebook/assets/js/10.7c0500f6.js"><link rel="prefetch" href="/Notebook/assets/js/11.96ce6645.js"><link rel="prefetch" href="/Notebook/assets/js/12.295d52cd.js"><link rel="prefetch" href="/Notebook/assets/js/13.6db71019.js"><link rel="prefetch" href="/Notebook/assets/js/14.0c1400d8.js"><link rel="prefetch" href="/Notebook/assets/js/15.edab26a3.js"><link rel="prefetch" href="/Notebook/assets/js/16.88fd161d.js"><link rel="prefetch" href="/Notebook/assets/js/17.408350d5.js"><link rel="prefetch" href="/Notebook/assets/js/18.6ab68d1c.js"><link rel="prefetch" href="/Notebook/assets/js/19.9e9ef1da.js"><link rel="prefetch" href="/Notebook/assets/js/2.e3a9cac0.js"><link rel="prefetch" href="/Notebook/assets/js/20.56c42c66.js"><link rel="prefetch" href="/Notebook/assets/js/22.cf2b0a03.js"><link rel="prefetch" href="/Notebook/assets/js/23.7413880a.js"><link rel="prefetch" href="/Notebook/assets/js/24.28bab990.js"><link rel="prefetch" href="/Notebook/assets/js/25.75c60686.js"><link rel="prefetch" href="/Notebook/assets/js/26.ef1edf61.js"><link rel="prefetch" href="/Notebook/assets/js/27.5aeea7cc.js"><link rel="prefetch" href="/Notebook/assets/js/28.8476b7e4.js"><link rel="prefetch" href="/Notebook/assets/js/29.956345a3.js"><link rel="prefetch" href="/Notebook/assets/js/30.b96e226e.js"><link rel="prefetch" href="/Notebook/assets/js/31.04440a69.js"><link rel="prefetch" href="/Notebook/assets/js/32.273112ca.js"><link rel="prefetch" href="/Notebook/assets/js/33.e709b2b3.js"><link rel="prefetch" href="/Notebook/assets/js/34.dc2136ae.js"><link rel="prefetch" href="/Notebook/assets/js/35.30ab0118.js"><link rel="prefetch" href="/Notebook/assets/js/36.cb41bc4a.js"><link rel="prefetch" href="/Notebook/assets/js/37.dd26a76e.js"><link rel="prefetch" href="/Notebook/assets/js/38.68398169.js"><link rel="prefetch" href="/Notebook/assets/js/39.93b8990e.js"><link rel="prefetch" href="/Notebook/assets/js/4.5f27db7e.js"><link rel="prefetch" href="/Notebook/assets/js/40.ed267aa9.js"><link rel="prefetch" href="/Notebook/assets/js/41.985eec03.js"><link rel="prefetch" href="/Notebook/assets/js/42.260a858d.js"><link rel="prefetch" href="/Notebook/assets/js/43.6cb97df7.js"><link rel="prefetch" href="/Notebook/assets/js/44.869ede03.js"><link rel="prefetch" href="/Notebook/assets/js/45.bf3e5a26.js"><link rel="prefetch" href="/Notebook/assets/js/46.a54b425c.js"><link rel="prefetch" href="/Notebook/assets/js/47.8ebe066b.js"><link rel="prefetch" href="/Notebook/assets/js/48.416ad307.js"><link rel="prefetch" href="/Notebook/assets/js/49.7394cd78.js"><link rel="prefetch" href="/Notebook/assets/js/5.01244a1f.js"><link rel="prefetch" href="/Notebook/assets/js/50.4675f4c4.js"><link rel="prefetch" href="/Notebook/assets/js/51.a112471f.js"><link rel="prefetch" href="/Notebook/assets/js/52.a6195fbf.js"><link rel="prefetch" href="/Notebook/assets/js/53.15f5f0a8.js"><link rel="prefetch" href="/Notebook/assets/js/54.bbc6eb3c.js"><link rel="prefetch" href="/Notebook/assets/js/55.ba5d1f28.js"><link rel="prefetch" href="/Notebook/assets/js/56.2d5a7c0d.js"><link rel="prefetch" href="/Notebook/assets/js/57.b6f47637.js"><link rel="prefetch" href="/Notebook/assets/js/58.3ce0f8ce.js"><link rel="prefetch" href="/Notebook/assets/js/59.66784ebf.js"><link rel="prefetch" href="/Notebook/assets/js/6.4d03de1b.js"><link rel="prefetch" href="/Notebook/assets/js/60.2c355106.js"><link rel="prefetch" href="/Notebook/assets/js/61.1fb23164.js"><link rel="prefetch" href="/Notebook/assets/js/62.5ee4cd1c.js"><link rel="prefetch" href="/Notebook/assets/js/63.08a71f63.js"><link rel="prefetch" href="/Notebook/assets/js/64.e7464a6a.js"><link rel="prefetch" href="/Notebook/assets/js/65.de9108af.js"><link rel="prefetch" href="/Notebook/assets/js/66.83e75f1b.js"><link rel="prefetch" href="/Notebook/assets/js/67.3caaf58d.js"><link rel="prefetch" href="/Notebook/assets/js/68.2dd69095.js"><link rel="prefetch" href="/Notebook/assets/js/69.927efe78.js"><link rel="prefetch" href="/Notebook/assets/js/7.a97cfeeb.js"><link rel="prefetch" href="/Notebook/assets/js/70.92fd8264.js"><link rel="prefetch" href="/Notebook/assets/js/71.0ef73e07.js"><link rel="prefetch" href="/Notebook/assets/js/72.7e0a2fee.js"><link rel="prefetch" href="/Notebook/assets/js/73.816bc4b8.js"><link rel="prefetch" href="/Notebook/assets/js/74.e1c44e90.js"><link rel="prefetch" href="/Notebook/assets/js/75.52d5991e.js"><link rel="prefetch" href="/Notebook/assets/js/76.3ab263b9.js"><link rel="prefetch" href="/Notebook/assets/js/77.76e6e752.js"><link rel="prefetch" href="/Notebook/assets/js/78.e2711be8.js"><link rel="prefetch" href="/Notebook/assets/js/79.ecf0c259.js"><link rel="prefetch" href="/Notebook/assets/js/8.698b291a.js"><link rel="prefetch" href="/Notebook/assets/js/80.6defbc57.js"><link rel="prefetch" href="/Notebook/assets/js/81.650b6435.js"><link rel="prefetch" href="/Notebook/assets/js/82.f41e2c82.js"><link rel="prefetch" href="/Notebook/assets/js/83.62a3d0ce.js"><link rel="prefetch" href="/Notebook/assets/js/84.f2e0ba7a.js"><link rel="prefetch" href="/Notebook/assets/js/85.7d5af1cd.js"><link rel="prefetch" href="/Notebook/assets/js/86.883b02f7.js"><link rel="prefetch" href="/Notebook/assets/js/87.dc5913fb.js"><link rel="prefetch" href="/Notebook/assets/js/88.369e5f01.js"><link rel="prefetch" href="/Notebook/assets/js/89.fd496723.js"><link rel="prefetch" href="/Notebook/assets/js/9.220abfab.js"><link rel="prefetch" href="/Notebook/assets/js/90.1d16c82f.js"><link rel="prefetch" href="/Notebook/assets/js/91.6bcdcb57.js"><link rel="prefetch" href="/Notebook/assets/js/92.3f6beaea.js"><link rel="prefetch" href="/Notebook/assets/js/93.d98ca184.js">
    <link rel="stylesheet" href="/Notebook/assets/css/0.styles.4f932b82.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Notebook/" class="home-link router-link-active"><!----> <span class="site-name">Yolanda</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Notebook/dailyRecord/" class="nav-link">📝日常记录</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">开发者</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/frontend-web/" class="nav-link router-link-active">💻大前端</a></li><li class="dropdown-item"><!----> <a href="/Notebook/rethink/" class="nav-link">🤔复盘</a></li><li class="dropdown-item"><h4>️️🧘算法修炼</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Notebook/algorithm/computerBasics.html" class="nav-link">计算机基础</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/dataStructure.html" class="nav-link">数据结构</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/algorithm.html" class="nav-link">算法分类</a></li><li class="dropdown-subitem"><a href="/Notebook/dataBase/index.html" class="nav-link">数据库</a></li></ul></li><li class="dropdown-item"><!----> <a href="/Notebook/devops/" class="nav-link">☁️运维</a></li><li class="dropdown-item"><!----> <a href="/Notebook/test/" class="nav-link">🚬测试</a></li><li class="dropdown-item"><!----> <a href="/Notebook/gis/" class="nav-link">🌍GIS</a></li><li class="dropdown-item"><!----> <a href="/Notebook/software/" class="nav-link">️️🖱️软件</a></li><li class="dropdown-item"><!----> <a href="/Notebook/network/" class="nav-link">️️🐛网络工程</a></li><li class="dropdown-item"><!----> <a href="/Notebook/csharp/" class="nav-link">🚗C#</a></li><li class="dropdown-item"><!----> <a href="/Notebook/unity/" class="nav-link">🎮Unity</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">设计</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/design/" class="nav-link">🖌️UI</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/bookmark/" class="nav-link">🏷书签整理</a></div><div class="nav-item"><a href="/Notebook/lint/" class="nav-link">✔️编码规范&amp;协同开发</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://jecyu.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔧个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🔗Github</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Yolanda177" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Yolanda github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jecyu.github.io/language-learning/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  英语学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jecyu.github.io/Fe-Auto-Testing/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端自动化测试
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Notebook/dailyRecord/" class="nav-link">📝日常记录</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">开发者</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/frontend-web/" class="nav-link router-link-active">💻大前端</a></li><li class="dropdown-item"><!----> <a href="/Notebook/rethink/" class="nav-link">🤔复盘</a></li><li class="dropdown-item"><h4>️️🧘算法修炼</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Notebook/algorithm/computerBasics.html" class="nav-link">计算机基础</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/dataStructure.html" class="nav-link">数据结构</a></li><li class="dropdown-subitem"><a href="/Notebook/algorithm/algorithm.html" class="nav-link">算法分类</a></li><li class="dropdown-subitem"><a href="/Notebook/dataBase/index.html" class="nav-link">数据库</a></li></ul></li><li class="dropdown-item"><!----> <a href="/Notebook/devops/" class="nav-link">☁️运维</a></li><li class="dropdown-item"><!----> <a href="/Notebook/test/" class="nav-link">🚬测试</a></li><li class="dropdown-item"><!----> <a href="/Notebook/gis/" class="nav-link">🌍GIS</a></li><li class="dropdown-item"><!----> <a href="/Notebook/software/" class="nav-link">️️🖱️软件</a></li><li class="dropdown-item"><!----> <a href="/Notebook/network/" class="nav-link">️️🐛网络工程</a></li><li class="dropdown-item"><!----> <a href="/Notebook/csharp/" class="nav-link">🚗C#</a></li><li class="dropdown-item"><!----> <a href="/Notebook/unity/" class="nav-link">🎮Unity</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">设计</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Notebook/design/" class="nav-link">🖌️UI</a></li></ul></div></div><div class="nav-item"><a href="/Notebook/bookmark/" class="nav-link">🏷书签整理</a></div><div class="nav-item"><a href="/Notebook/lint/" class="nav-link">✔️编码规范&amp;协同开发</a></div><div class="nav-item"><a href="http://shooterblog.site/Learn-JS-Demo/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📖知识脑图
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://jecyu.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🔧个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">🔗Github</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Yolanda177" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Yolanda github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jecyu.github.io/language-learning/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  英语学习
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://jecyu.github.io/Fe-Auto-Testing/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端自动化测试
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Notebook/frontend-web/browser.html" class="sidebar-link">浏览器</a></li><li><a href="/Notebook/frontend-web/css.html" class="sidebar-link">CSS</a></li><li><a href="/Notebook/frontend-web/javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/Notebook/frontend-web/es6.html" class="sidebar-link">ES6</a></li><li><a href="/Notebook/frontend-web/react.html" class="sidebar-link">React</a></li><li><a href="/Notebook/frontend-web/vue.html" class="sidebar-link">Vue</a></li><li><a href="/Notebook/frontend-web/webpack.html" class="sidebar-link">webpack</a></li><li><a href="/Notebook/frontend-web/" class="sidebar-link">工程化</a></li><li><a href="/Notebook/frontend-web/modulization.html" class="sidebar-link">模块化</a></li><li><a href="/Notebook/frontend-web/architecture.html" class="sidebar-link">架构</a></li><li><a href="/Notebook/frontend-web/authentication.html" class="sidebar-link">鉴权&amp;&amp;认证</a></li><li><a href="/Notebook/frontend-web/chrome.html" class="sidebar-link">chrome 调试技巧</a></li><li><a href="/Notebook/frontend-web/noJQ.html" class="sidebar-link">You (Might) Don't Need jQuery</a></li><li><a href="/Notebook/frontend-web/performance.html" class="sidebar-link">性能优化</a></li><li><a href="/Notebook/frontend-web/npm.html" class="sidebar-link">npm</a></li><li><a href="/Notebook/frontend-web/lodash.html" class="sidebar-link">lodash 源码分析及思路学习</a></li><li><a href="/Notebook/frontend-web/babel.html" class="sidebar-link">Babel</a></li><li><a href="/Notebook/frontend-web/rollup.html" class="sidebar-link">rollup</a></li><li><a href="/Notebook/frontend-web/docker.html" class="sidebar-link">Docker</a></li><li><a href="/Notebook/frontend-web/security.html" class="sidebar-link">前端安全</a></li><li><a href="/Notebook/frontend-web/file.html" class="sidebar-link">文件处理</a></li><li><a href="/Notebook/frontend-web/interview.html" class="active sidebar-link">常见问题 1</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#js" class="sidebar-link">JS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#ts中-type-和-interface-的区别？（byd）" class="sidebar-link">Ts中 type 和 interface 的区别？（byd）</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#js的设计模式有哪些？（星巴克科技）" class="sidebar-link">JS的设计模式有哪些？（星巴克科技）</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#如何实现小驼峰格式转换？" class="sidebar-link">如何实现小驼峰格式转换？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#（项目）如何实现版本比对？" class="sidebar-link">（项目）如何实现版本比对？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#如何实现有效括号匹配？" class="sidebar-link">如何实现有效括号匹配？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#如何判断b是否是a的子集（a和b有重复元素，要求b的同个元素出现次数-a的同个元素出现次数" class="sidebar-link">如何判断b是否是a的子集（a和b有重复元素，要求b的同个元素出现次数&lt;=a的同个元素出现次数</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#说说vue和react的相同点和不同点" class="sidebar-link">说说vue和react的相同点和不同点</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#说说单向数据流和双向数据绑定的原理，区别" class="sidebar-link">说说单向数据流和双向数据绑定的原理，区别</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#说一下-js-的基本数据类型有哪些？" class="sidebar-link">说一下 js 的基本数据类型有哪些？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#基本类型和引用类型的存储方式？（星巴克科技）" class="sidebar-link">基本类型和引用类型的存储方式？（星巴克科技）</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#判断类型的方法有哪些？" class="sidebar-link">判断类型的方法有哪些？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#（项目）清除字符串空格的方式？" class="sidebar-link">（项目）清除字符串空格的方式？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#（项目）判断是不是字符串数字？" class="sidebar-link">（项目）判断是不是字符串数字？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#_1-2-3-map-parseint-返回什么？" class="sidebar-link">[1,2,3].map(parseInt) 返回什么？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#数组、字符串、对象的基本操作方法？" class="sidebar-link">数组、字符串、对象的基本操作方法？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#说下对-js-原型和原型链的理解" class="sidebar-link">说下对 js 原型和原型链的理解</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#说一个原型里比较少人知道的特性？" class="sidebar-link">说一个原型里比较少人知道的特性？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#原型链有什么作用？" class="sidebar-link">原型链有什么作用？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#原型继承是什么意思？" class="sidebar-link">原型继承是什么意思？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#如何实现原型继承？" class="sidebar-link">如何实现原型继承？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#说一下类继承的原理？" class="sidebar-link">说一下类继承的原理？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#类继承的实现方式" class="sidebar-link">类继承的实现方式</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#new-操作符做了什么？" class="sidebar-link">new 操作符做了什么？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#如何实现一个new函数呢？" class="sidebar-link">如何实现一个new函数呢？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#如何保证函数必须要用-new-调用？" class="sidebar-link">如何保证函数必须要用 new 调用？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#什么是闭包？" class="sidebar-link">什么是闭包？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#为什么说-js-中函数都是天生闭包的？" class="sidebar-link">为什么说 JS 中函数都是天生闭包的？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#什么是作用域链？" class="sidebar-link">什么是作用域链？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#this-指向有哪几种？" class="sidebar-link">this 指向有哪几种？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#call、apply、bind-的区别？" class="sidebar-link">call、apply、bind 的区别？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#执行上下文" class="sidebar-link">执行上下文</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#深拷贝与浅拷贝的区别？" class="sidebar-link">深拷贝与浅拷贝的区别？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#实现深拷贝" class="sidebar-link">实现深拷贝</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#实现浅拷贝" class="sidebar-link">实现浅拷贝</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#什么是深度遍历和广度遍历？" class="sidebar-link">什么是深度遍历和广度遍历？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#请分别用深度优先思想和广度优先思想实现一个拷贝函数？" class="sidebar-link">请分别用深度优先思想和广度优先思想实现一个拷贝函数？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#new-set-应用场景" class="sidebar-link">new Set() 应用场景</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#set、map、weakset、weakmap-的区别？" class="sidebar-link">Set、Map、WeakSet、WeakMap 的区别？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#实现一个简单的模版字符串替换" class="sidebar-link">实现一个简单的模版字符串替换</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#数组扁平化去重排序" class="sidebar-link">数组扁平化去重排序</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#如何实现一个-flat-函数？" class="sidebar-link">如何实现一个 flat 函数？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#什么是节流？" class="sidebar-link">什么是节流？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#什么是防抖？" class="sidebar-link">什么是防抖？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#垃圾回收机制-星巴克科技" class="sidebar-link">垃圾回收机制 (星巴克科技)</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#事件循环" class="sidebar-link">事件循环</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#宏任务" class="sidebar-link">宏任务</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#微任务" class="sidebar-link">微任务</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#async-await" class="sidebar-link">async/await</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#promise" class="sidebar-link">Promise</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#async-await、promise、promise-then-等执行顺序？" class="sidebar-link">async/await、promise、promise.then 等执行顺序？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#模块化" class="sidebar-link">模块化</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#拖拽上传" class="sidebar-link">拖拽上传</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#大文件分片断点续传" class="sidebar-link">大文件分片断点续传</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#esm-与-commonjs-的差异" class="sidebar-link">esm 与 commonjs 的差异</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#html" class="sidebar-link">HTML</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#语义化怎么理解？" class="sidebar-link">语义化怎么理解？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#常见的行内元素、块级元素、空元素有哪些？" class="sidebar-link">常见的行内元素、块级元素、空元素有哪些？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#canvas-和-svg-有什么区别？" class="sidebar-link">Canvas 和 SVG 有什么区别？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#html5-的-drag-api" class="sidebar-link">HTML5 的 drag API</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#css" class="sidebar-link">CSS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#对-css-sprites-的理解？" class="sidebar-link">对 CSS Sprites 的理解？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#link-和-import-的区别？" class="sidebar-link">link 和 @import 的区别？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#什么是css-工程化？" class="sidebar-link">什么是CSS 工程化？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#css3-中-transition-和-animation-的属性分别有哪些？" class="sidebar-link">CSS3 中 transition 和 animation 的属性分别有哪些？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#什么是-css-盒模型？" class="sidebar-link">什么是 Css 盒模型？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#css-中有哪些选择器？优先级怎么处理？" class="sidebar-link">CSS 中有哪些选择器？优先级怎么处理？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#伪类和伪元素有什么区别？" class="sidebar-link">伪类和伪元素有什么区别？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#em-px-rem-vh-vw-这些单位有什么区别？" class="sidebar-link">em/px/rem/vh/vw 这些单位有什么区别？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#设备像素、css像素、设备独立像素、dpr、ppi-之间有什么区别？" class="sidebar-link">设备像素、css像素、设备独立像素、dpr、ppi 之间有什么区别？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#🌟-使用-css-隐藏元素有哪些？" class="sidebar-link">🌟 使用 css 隐藏元素有哪些？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#🌟-以上隐藏元素的方式的区别？" class="sidebar-link">🌟 以上隐藏元素的方式的区别？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#如何实现两栏布局，右侧自适应？三栏布局中间自适应呢？" class="sidebar-link">如何实现两栏布局，右侧自适应？三栏布局中间自适应呢？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#🌟-什么是-grid-布局？" class="sidebar-link">🌟 什么是 grid 布局？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#🌟-什么是-flex-布局？" class="sidebar-link">🌟 什么是 flex 布局？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#🌟-position-有哪些属性？" class="sidebar-link">🌟 position 有哪些属性？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#🌟-display-有哪些属性？" class="sidebar-link">🌟 display 有哪些属性？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#sass-和-less-的区别？" class="sidebar-link">Sass 和 Less 的区别？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#说说对-css-预编语言的理解，以及它们之间的区别？" class="sidebar-link">说说对 CSS 预编语言的理解，以及它们之间的区别？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#怎么让chrome支持小于12px-的文字？" class="sidebar-link">怎么让Chrome支持小于12px 的文字？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#解决-1px-问题的方案有哪些？" class="sidebar-link">解决 1px 问题的方案有哪些？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#怎么使用-css-画一个三角形？" class="sidebar-link">怎么使用 CSS 画一个三角形？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#如何使用css完成视差滚动效果" class="sidebar-link">如何使用css完成视差滚动效果?</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#什么是-bfc？" class="sidebar-link">什么是 BFC？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#如何获取元素的宽高属性？" class="sidebar-link">如何获取元素的宽高属性？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#🌟-如何实现垂直居中布局？" class="sidebar-link">🌟 如何实现垂直居中布局？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#你说一下-css3-的新特性有哪些？" class="sidebar-link">你说一下 CSS3 的新特性有哪些？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#如何实现单行-多行文本溢出的省略样式？" class="sidebar-link">如何实现单行/多行文本溢出的省略样式？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#css-性能优化？" class="sidebar-link">CSS 性能优化？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#重绘与回流" class="sidebar-link">重绘与回流</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#如何避免发生重绘和回流？" class="sidebar-link">如何避免发生重绘和回流？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#为什么-css-选择器的匹配规则是从右到左？" class="sidebar-link">为什么 CSS 选择器的匹配规则是从右到左？</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#层叠上下文？" class="sidebar-link">层叠上下文？</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#node" class="sidebar-link">Node</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#koa" class="sidebar-link">koa</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#算法" class="sidebar-link">算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#树相关" class="sidebar-link">树相关</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#深度优先遍历" class="sidebar-link">深度优先遍历</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#广度优先遍历" class="sidebar-link">广度优先遍历</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#排序" class="sidebar-link">排序</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#链表" class="sidebar-link">链表</a></li></ul></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#正则" class="sidebar-link">正则</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#项目经验" class="sidebar-link">项目经验</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#内存泄漏相关" class="sidebar-link">内存泄漏相关</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#项目构建相关" class="sidebar-link">项目构建相关</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#首屏优化相关" class="sidebar-link">首屏优化相关</a></li><li class="sidebar-sub-header"><a href="/Notebook/frontend-web/interview.html#系统亮点" class="sidebar-link">系统亮点</a></li></ul></li></ul></li><li><a href="/Notebook/frontend-web/interview2.html" class="sidebar-link">常见问题 2</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="常见问题-1"><a href="#常见问题-1" aria-hidden="true" class="header-anchor">#</a> 常见问题 1</h1> <h2 id="js"><a href="#js" aria-hidden="true" class="header-anchor">#</a> JS</h2> <h3 id="ts中-type-和-interface-的区别？（byd）"><a href="#ts中-type-和-interface-的区别？（byd）" aria-hidden="true" class="header-anchor">#</a> Ts中 type 和 interface 的区别？（byd）</h3> <p>type 和 interface 都是定义对象的结构，都可以通过继承来扩展
区别如下：</p> <ol><li>扩展方式不同：interface 通过 entends 继承；type 用 交叉类型继承</li> <li>范围：type 可以直接定义基本类型、联合类型；interface 不可以</li> <li>声明合并：interface 支持多次定义自动合并；type 不能重复定义</li></ol> <h3 id="js的设计模式有哪些？（星巴克科技）"><a href="#js的设计模式有哪些？（星巴克科技）" aria-hidden="true" class="header-anchor">#</a> JS的设计模式有哪些？（星巴克科技）</h3> <p>定义：设计模式是一种被反复使用的、可重用的代码解决方案，用来解决开发过程中遇到的常见问题</p> <p>类型：分为三大类</p> <ul><li>创建型：关注对象的创建过程，如 工厂模式、单例模式、建造者模式</li> <li>结构型：关注对象之间的关系，如 适配器模式、代理模式、装饰器模式</li> <li>行为型：关注对象的行为和职责分配，如 观察者模式、发布-订阅模式、策略模式</li></ul> <p>应用：</p> <ul><li>组件通信：</li> <li>组件封装：装饰器模式扩展组件功能</li></ul> <p><strong>工厂模式</strong></p> <ul><li>用途：用一个工厂函数来创建对象，而不是直接使用构造函数</li> <li>举例：根据类型动态加载不同的模块；封装组件库时，根据类型创建不同的组件实例</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> InputFactory <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">createInput</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">'text'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TextInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'select'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SelectInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'checkbox'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CheckboxInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// ...其他类型</span>
      <span class="token keyword">default</span><span class="token punctuation">:</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Unsupported input type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>单例模式</strong></p> <ul><li>用途：确保一个类只有一个实例，并提供一个全局访问点</li> <li>举例：vue的状态管理 store，整个应用中共享状态；封装 axios 暴露一个实例 算吗？</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  store<span class="token punctuation">,</span> <span class="token comment">// 将 store 实例传递给 Vue 根实例</span>
  <span class="token comment">// ...其他选项</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>建造者模式</strong></p> <ul><li>用途：分步创建复杂对象</li> <li>举例：封装一个 Request 类，根据不同的属性配置和axios实例，逐步构建这个对象</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Request</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">opts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span>opts<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">get</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function-variable function">post</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
<span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token keyword">get</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>get<span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> post <span class="token operator">=</span> request<span class="token punctuation">.</span>post<span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> request<span class="token punctuation">.</span>instance<span class="token punctuation">;</span>
</code></pre></div><p><strong>适配器模式</strong></p> <ul><li>用途：通过适配器类，解决接口不兼容问题</li> <li>举例：组件化开发时，数据格式的转换，命名或类型的兼容；</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">DatePickerAdapter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">picker</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>picker <span class="token operator">=</span> picker<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setOptions</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 转换配置选项以适配第三方组件</span>
    <span class="token keyword">const</span> adaptedOptions <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">adaptOptions</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>picker<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span>adaptedOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">adaptOptions</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 适配逻辑，例如将 'startDate' 转换为 'minDate'</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>options<span class="token punctuation">,</span>
      minDate<span class="token punctuation">:</span> options<span class="token punctuation">.</span>startDate
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>装饰器模式</strong></p> <ul><li>用途：暴露接口，动态地为对象添加额外的功能，而不用修改原始的代码</li> <li>举例：组件封装时，动态添加样式等逻辑</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;Hello World&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ThemedComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">component<span class="token punctuation">,</span> theme</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>component <span class="token operator">=</span> component<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>theme <span class="token operator">=</span> theme<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> themedStyle <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">style=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>theme<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>themedStyle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>component<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用装饰器</span>
<span class="token keyword">const</span> themedButton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThemedComponent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'color: red;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>代理模式</strong></p> <ul><li>用途：控制对对象的访问，可以在访问对象前后增加逻辑</li> <li>举例：Proxy 的使用</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'John'</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>prop <span class="token operator">===</span> <span class="token string">'age'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years old</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userProxy<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;30 years old&quot;</span>
</code></pre></div><p><strong>观察者模式</strong></p> <ul><li>用途：一个对象状态发生变化时，通知所有的观察者</li> <li>举例：状态管理，当状态更新时，所有订阅的组件都会收到通知并更新；表单组件的验证；父子组件通信</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">newState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>this<span class="token punctuation">.</span>state<span class="token punctuation">,</span> <span class="token operator">...</span>newState<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">attach</span><span class="token punctuation">(</span><span class="token parameter">observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">observer</span> <span class="token operator">=&gt;</span> observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">store</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>store <span class="token operator">=</span> store<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Component updated with new state:'</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Store</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> component <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Component</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span><span class="token punctuation">;</span>
store<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 更新状态，组件收到通知并更新</span>
</code></pre></div><p><strong>发布-订阅模式</strong></p> <ul><li>用途：消息通信</li> <li>举例：eventBus、window.eventListener 等等</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> pubSub <span class="token operator">=</span> <span class="token punctuation">{</span>
    events<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>event<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">publish</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>event<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">callback</span> <span class="token operator">=&gt;</span> <span class="token function">callback</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
pubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'event1'</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Event 1:'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'event1'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> key<span class="token punctuation">:</span> <span class="token string">'value'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>策略模式</strong></p> <ul><li>用途：动态替换算法或行为</li> <li>举例：根据不同的APP，加载对应的插件 JSBridge；</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">StrategyA</span> <span class="token punctuation">{</span>
    <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">StrategyB</span> <span class="token punctuation">{</span>
    <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token function">setStrategy</span><span class="token punctuation">(</span><span class="token parameter">strategy</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">executeStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">setStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StrategyA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">executeStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">setStrategy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StrategyB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">executeStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="如何实现小驼峰格式转换？"><a href="#如何实现小驼峰格式转换？" aria-hidden="true" class="header-anchor">#</a> 如何实现小驼峰格式转换？</h3> <p>例：输入 HgaG_sHaaa 输出 hgagShaaa</p> <p>可用正则：</p> <ol><li><code>/^[^a-zA-Z0-9]+(.)?/g</code> 非字母、数字外的命中规则</li> <li><code>/^[-_\s.]+(.)?/g</code> -或_或空格或. 的命中规则</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">toCamelCase</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^[-_\s.]+(.)?/g</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> char</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span> char <span class="token operator">?</span> char<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="（项目）如何实现版本比对？"><a href="#（项目）如何实现版本比对？" aria-hidden="true" class="header-anchor">#</a> （项目）如何实现版本比对？</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 纯数字版本</span>
<span class="token keyword">function</span> <span class="token function">compareVersion</span><span class="token punctuation">(</span><span class="token parameter">version1<span class="token punctuation">,</span> version2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>version1 <span class="token operator">===</span> version2<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span>
  <span class="token keyword">const</span> v1 <span class="token operator">=</span> version1<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> v2 <span class="token operator">=</span> version2<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> maxLength <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>v1<span class="token punctuation">.</span>length<span class="token punctuation">,</span> v2<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> maxLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> num1 <span class="token operator">=</span> i <span class="token operator">&lt;</span> maxLength <span class="token operator">?</span> v1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> num2 <span class="token operator">=</span> i <span class="token operator">&lt;</span> maxLength <span class="token operator">?</span> v2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>num1 <span class="token operator">&gt;</span> num2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// version1 is &gt; version2</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>num1 <span class="token operator">&lt;</span> num2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// version1 is &lt; version2</span>
      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 考虑预发版本</span>
<span class="token keyword">const</span> <span class="token function-variable function">compareVersionWithPreRelease</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">version1<span class="token punctuation">,</span> version2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> v1 <span class="token operator">=</span> version1<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> v2 <span class="token operator">=</span> version2<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Number<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> prerelease1 <span class="token operator">=</span> version1<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> prerelease2 <span class="token operator">=</span> version2<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token comment">// console.log(prerelease1, prerelease2);</span>
  <span class="token comment">// 比较主版本号、次版本号、修订号</span>
  <span class="token keyword">const</span> maxLength <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>v1<span class="token punctuation">.</span>length<span class="token punctuation">,</span> v2<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> maxLength<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> num1 <span class="token operator">=</span> i <span class="token operator">&lt;</span> v1<span class="token punctuation">.</span>length <span class="token operator">?</span> v1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> num2 <span class="token operator">=</span> i <span class="token operator">&lt;</span> v2<span class="token punctuation">.</span>length <span class="token operator">?</span> v2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>num1 <span class="token operator">&gt;</span> num2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>num1 <span class="token operator">&lt;</span> num2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 如果 主版本号、次版本号、修订号相同 则比较预发版本号</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>prerelease1 <span class="token operator">&amp;&amp;</span> prerelease2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prerelease1 <span class="token operator">&lt;</span> prerelease2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>prerelease1 <span class="token operator">&gt;</span> prerelease2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>prerelease1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// version1 有预发布版本号，version2没有，则 version1 小于 version2</span>
    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>prerelease2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// version2 有预发布版本号，version1没有，则 version1 大于 version2</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">compareVersionWithPreRelease</span><span class="token punctuation">(</span><span class="token string">'1.4.2-alpha'</span><span class="token punctuation">,</span> <span class="token string">'1.4.2-beta'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">compareVersionWithPreRelease</span><span class="token punctuation">(</span><span class="token string">'1.4.2+20130313144700'</span><span class="token punctuation">,</span> <span class="token string">'1.4.2-beta'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="如何实现有效括号匹配？"><a href="#如何实现有效括号匹配？" aria-hidden="true" class="header-anchor">#</a> 如何实现有效括号匹配？</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'['</span><span class="token punctuation">:</span> <span class="token string">']'</span><span class="token punctuation">,</span>
    <span class="token string">'{'</span><span class="token punctuation">:</span> <span class="token string">'}'</span><span class="token punctuation">,</span>
    <span class="token string">'('</span><span class="token punctuation">:</span> <span class="token string">')'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> char <span class="token keyword">of</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">[</span>char<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> next <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">[</span>next<span class="token punctuation">]</span> <span class="token operator">!==</span> char<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> stack<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token string">'{}'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token string">'{]'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><h3 id="如何判断b是否是a的子集（a和b有重复元素，要求b的同个元素出现次数-a的同个元素出现次数"><a href="#如何判断b是否是a的子集（a和b有重复元素，要求b的同个元素出现次数-a的同个元素出现次数" aria-hidden="true" class="header-anchor">#</a> 如何判断b是否是a的子集（a和b有重复元素，要求b的同个元素出现次数&lt;=a的同个元素出现次数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">checkBinA</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">b<span class="token punctuation">,</span> a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mapA <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">const</span> mapB <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> char <span class="token keyword">of</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mapB<span class="token punctuation">[</span>char<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mapB<span class="token punctuation">[</span>char<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      mapB<span class="token punctuation">[</span>char<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> char <span class="token keyword">of</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mapA<span class="token punctuation">[</span>char<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mapA<span class="token punctuation">[</span>char<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      mapA<span class="token punctuation">[</span>char<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> mapB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mapA<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">||</span> mapB<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">&gt;</span> mapA<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mapB<span class="token punctuation">,</span> mapA<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">checkBinA</span><span class="token punctuation">(</span><span class="token string">'1111234'</span><span class="token punctuation">,</span> <span class="token string">'111233455'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="说说vue和react的相同点和不同点"><a href="#说说vue和react的相同点和不同点" aria-hidden="true" class="header-anchor">#</a> 说说vue和react的相同点和不同点</h3> <p>相同点：</p> <p>1、<strong>虚拟dom实现快速渲染</strong>：两者都是利用虚拟dom技术，通过比较新旧虚拟dom的差异来最小化真实dom的操作，从而提高渲染性能</p> <p>2、<strong>组件化</strong>：都支持组件化开发，允许开发者将界面拆分成独立、可复用的组件</p> <p>3、<strong>响应式和声明式</strong>：都提供了响应式的数据绑定和声明式的渲染方式，使得开发者可以更容易地构建和维护 UI</p> <p>4、<strong>服务端渲染</strong>：都支持服务端渲染，有利于提高加载速度</p> <p>5、<strong>广泛的社区生态支持</strong>：都有庞大的社区和生态系统，提供了大量的插件、工具和资源</p> <p>不同点：</p> <p>1、<strong>模版语法和jsx</strong>：vue使用基于html的模版语法来声明组件的渲染逻辑，而react使用jsx，一种看起来像xml的js语法扩张</p> <p>2、<strong>数据流与通信</strong>：vue支持双向数据绑定，修改数据会自动更新视图，组件通信方式有多种，比如props、自定义事件、provide/inject等等；react采用单向数据流，通过props和state来管理组件状态，子组件向父组件传递数据通常使用回调函数，react本身不支持自定义事件，但可以通过context进行跨层级通信</p> <p>3、<strong>状态管理</strong>：vue推荐使用vuex或pinia作为状态管理库，vuex与vue的集成更紧密；react则推荐使用redux，而redux也适用于其他前端框架</p> <p>4、<strong>Diff算法与性能</strong>：vue2使用全量diff、vue3则采用map数据结构以及动静结合的方式，在编译阶段提前标记静态节点，diff过程中直接跳过有静态标记的节点，提高了性能；而react采用递归同层比较，标识差异点保存到diff队列保存得到patch树，再统一操作批量更新dom</p> <p>5、<strong>设计理念</strong>：vue主张渐进式开发，易于上手，适合初学者；react主张函数式编程，相对抽象和灵活性更高</p> <h3 id="说说单向数据流和双向数据绑定的原理，区别"><a href="#说说单向数据流和双向数据绑定的原理，区别" aria-hidden="true" class="header-anchor">#</a> 说说单向数据流和双向数据绑定的原理，区别</h3> <p>单向数据流</p> <p>1、<strong>数据流向</strong>：单向数据流意味着数据只能从一个方向流动，通常是父组件向子组件，形成一个单向的链式结构</p> <p>2、<strong>状态管理</strong>：应用程序的状态通常由顶层组件（或者全局状态管理器）管理，并通过props将状态传递给子组件</p> <p>3、<strong>更新机制</strong>：数据更新通常是通过回调函数或事件处理程序来实现，子组件通过调用这些回调函数来影响父组件的状态</p> <h3 id="说一下-js-的基本数据类型有哪些？"><a href="#说一下-js-的基本数据类型有哪些？" aria-hidden="true" class="header-anchor">#</a> 说一下 js 的基本数据类型有哪些？</h3> <p>基本类型：Undefined、Null、String、Number、Boolean、BigInt、Symbol (七种原始类型)</p> <p>引用类型：Object</p> <p>类型转换：</p> <p><img src="https://static001.geekbang.org/resource/image/71/20/71bafbd2404dc3ffa5ccf5d0ba077720.jpg" alt="类型转换"></p> <h3 id="基本类型和引用类型的存储方式？（星巴克科技）"><a href="#基本类型和引用类型的存储方式？（星巴克科技）" aria-hidden="true" class="header-anchor">#</a> 基本类型和引用类型的存储方式？（星巴克科技）</h3> <ol><li>基本类型包括：String、Number、Boolean、Null、Undefined 和 Symbol，这些类型是<strong>按值存储</strong>，数据的值存在<strong>栈内存</strong>中</li> <li>引用类型包括：Object、Array、Function 等等，这些类型是是<strong>按引用存储</strong>，存储在<strong>堆内存</strong>中</li></ol> <p>什么是栈内存？</p> <ul><li>栈是一种<strong>后进先出</strong>的数据结构，栈内存访问速度较快，因为存储靠近CPU的地方，但存储空间相对较小</li></ul> <p>什么是堆内存？</p> <ul><li>堆内存的访问速度相对较慢，因为一般在物理内存中，远离CPU，但存储空间相对较大</li></ul> <p>什么是按引用存储？</p> <ul><li>当我们执行 <code>let obj1 = { name: 'Alice', age: 18 }</code> 时，一个新的对象 <code>{ name: 'Alice', age: 18 }</code> 被创建在堆内存中，但 obj1 存储的并不是对象的本身，而是这个对象在内存中的地址（也就是引用）；当我们再执行 <code>let obj2 = obj1</code> 时，并没有创建一个新的对象，而是复制了 obj1 的引用，此时 obj1和obj2 都指向堆内存中的同一个对象</li></ul> <h3 id="判断类型的方法有哪些？"><a href="#判断类型的方法有哪些？" aria-hidden="true" class="header-anchor">#</a> 判断类型的方法有哪些？</h3> <p>typeof,</p> <p>instanceof,</p> <p>Object.prototype.toString.call(),</p> <p>Array.isArray(),</p> <p>isNaN(),</p> <h3 id="（项目）清除字符串空格的方式？"><a href="#（项目）清除字符串空格的方式？" aria-hidden="true" class="header-anchor">#</a> （项目）清除字符串空格的方式？</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">1</span>、清除首尾两端的空格：str<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token number">2</span>、清除首部空格（es2019）：str<span class="token punctuation">.</span><span class="token function">trimStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token number">3</span>、清除尾部空格（es2019）：str<span class="token punctuation">.</span><span class="token function">trimEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token number">4</span>、使用正则表达：str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\s+/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span> 或者 str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>

<span class="token number">5</span>、使用split和join：str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="（项目）判断是不是字符串数字？"><a href="#（项目）判断是不是字符串数字？" aria-hidden="true" class="header-anchor">#</a> （项目）判断是不是字符串数字？</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span>、funtion <span class="token function">isNumberString</span><span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\s+/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token number">2</span>、functoin <span class="token function">isNumberString</span><span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用正则</span>
  <span class="token comment">// 正负整数</span>
  <span class="token keyword">const</span> regexInteger <span class="token operator">=</span> <span class="token regex">/^[-+]?\d+$/</span>
  <span class="token comment">// 浮点数</span>
  <span class="token keyword">const</span> regexFloat <span class="token operator">=</span> <span class="token regex">/^[-+]?\d+(\.\d+)?$/</span>
  <span class="token comment">// 科学计数法</span>
  <span class="token keyword">const</span> regexScientification <span class="token operator">=</span> <span class="token regex">/^[-+]?\d+(\.\d+)?([eE][-+]?\d+)?$/</span>
  <span class="token keyword">return</span> regexScientification<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token number">3</span>、Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 方法</span>
</code></pre></div><h3 id="_1-2-3-map-parseint-返回什么？"><a href="#_1-2-3-map-parseint-返回什么？" aria-hidden="true" class="header-anchor">#</a> [1,2,3].map(parseInt) 返回什么？</h3> <p>前提知识：</p> <p>parseInt(value, radix) 接收两个参数：</p> <ul><li>第一个为数值或数值字符串，可以看作是字符串&quot;abcd&quot;</li> <li>第二个为基数，必须为 2 ～ 36，如果不填或为 0 则默认为 10</li></ul> <p>如何计算 parseInt(&quot;abcd&quot;, e) ? <strong>关键是从小于 e 的那一位开始计算</strong></p> <p>当 e 属于 2~36 时，比较 abcd 每位与 e 的大小关系：</p> <ul><li>a、b、c、d 都小于 e =&gt; 如 parseInt(&quot;1024&quot;, 5) = 4X5^0+2X5^1+0X5^2+1X5^3 = 139</li> <li>其中一个如 c 大于 e =&gt; 如 parseInt(&quot;1031&quot;, 2) = 0X2^0+1X2^1 = 2</li> <li>都大于或等于 e =&gt; 如 parseInt(&quot;8&quot;, 5) = NaN 、parseInt(&quot;5&quot;, 5) = NaN</li></ul> <p>回到 [1,2,3].map(parseInt)</p> <p>[1,2,3].map 实际会传递三个参数：当前 item，当前 index 和当前数组 arr，所以 parseInt 接收 item, index 两个参数即：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token parameter"><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span>   radix <span class="token operator">=</span> <span class="token number">0</span> 看作 radix <span class="token operator">=</span> <span class="token number">10</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token parameter"><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">NaN</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token parameter"><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">NaN</span>
<span class="token comment">// 在parseInt(2, 1)、 parseInt(3, 2) 中，第二个参数 2 表示将输入按照二进制来解析。但一进制只有 0 这一个数字、二进制数只有 0 和 1，所以 3 不是有效的二进制表示，这种情况下 parseInt 通常会返回 NaN </span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'1011'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">11</span> 
<span class="token comment">// 1011是一个二进制数，转换成十进制计算：从右往左为 1*2的0次方+1*2的1次方+0*2的二次方+1*2的三次方=1+2+0+8=11</span>
</code></pre></div><h3 id="数组、字符串、对象的基本操作方法？"><a href="#数组、字符串、对象的基本操作方法？" aria-hidden="true" class="header-anchor">#</a> 数组、字符串、对象的基本操作方法？</h3> <p><strong>对象</strong>：</p> <ul><li>Object.keys() 返回对象中可枚举属性的键名数组</li> <li>Object.entries() 返回对象中可枚举属性的键值对数组</li> <li>Object.assign() 将源对象的可枚举属性分配到目标对象，实现浅拷贝</li> <li>Object.create() 创建一个新对象，使用现有对象作为新对象的原型（<em>proto</em>指向）</li></ul> <p><strong>数组</strong>：</p> <ul><li><p>添加、删除元素 push()、pop()、shift()、unshift()、splice() (包含startIndex)都是修改原数组</p></li> <li><p>遍历数组 forEach()、map()</p></li> <li><p>查询、过滤 find()、includes()、filter()</p></li> <li><p>join() 指定字符连接数组元素生成一个字符串</p></li></ul> <p><strong>字符串</strong>：</p> <ul><li>拼接 concat()、截取 slice()、substring() 都是返回新字符串
<ul><li>slice()、substring()<code>提取的新字符串包括</code>beginIndex<code>但不包括</code>endIndex</li></ul></li> <li>查询 includes()、indexOf()、</li> <li>匹配 match()、替换 replace()</li> <li>split() 指定字符分割成一个数组</li></ul> <h3 id="说下对-js-原型和原型链的理解"><a href="#说下对-js-原型和原型链的理解" aria-hidden="true" class="header-anchor">#</a> 说下对 js 原型和原型链的理解</h3> <p>js 原型是指为其他对象提供共享属性访问的对象。在创建对象时，每个对象都包含一个隐式引用（<code>__proto__</code>）指向它的原型对象或者 null（<code>Object.prototype</code>）</p> <p>原型链：原型也是对象，因此它有自己的原型，这样就构成了一个原型链</p> <p>原型链的查找过程：</p> <p>1、<strong>对象本身</strong>：先在对象本身查找属性或方法</p> <p>2、<strong>原型对象</strong>：对象本身没找到，继续在对象的原型中查找</p> <p>3、<strong>原型的原型</strong>：原型对象没找到，继续在原型的原型中查找，以此类推</p> <p>4、<strong>Object.prototype</strong>：最终会达到 Object.prototype</p> <p>5、<strong>null</strong>：仍未找到，返回undefined</p> <p>补充：在JavaScript中，每个对象都有一个内部属性（[[Prototype]]），这个属性引用了另一个对象，这个被引用的对象就是原对象的原型。原型对象可以包含属性和方法，这些属性和方法可以被原对象继承</p> <p>补充：在JavaScript中，[[Prototype]]和__proto__的区别</p> <p><strong>[[Prototype]]</strong>：</p> <p>1、<strong>内部属性</strong>：</p> <ul><li>[[Prototype]]是每个JavaScript对象的内部属性（或称为内部槽），它引用了对象的原型对象。</li> <li>这个属性是不可枚举的，不能通过常规方式访问或修改</li></ul> <p>2、<strong>访问方式</strong>：</p> <ul><li>通常不直接访问[[Prototype]]，而是通过语言提供的API间接访问</li></ul> <p>3、<strong>规范</strong>：</p> <ul><li>[[Prototype]]是ECMAScript规范中定义的内部机制，确保了原型链的一致性和规范性</li></ul> <p><strong>_<em>proto</em>_</strong></p> <p>1、<strong>访问器属性</strong>：</p> <ul><li>__proto__是一个访问器属性，它在大多数现代JavaScript引擎中被实现，用于获取和设置对象的原型对象</li> <li>这个属性不是标准的一部分，但在实践中被广泛使用</li></ul> <p>2、<strong>访问方式</strong>：</p> <ul><li>可以通过obj.__proto__直接访问对象的原型对象</li> <li>也可以通过Object.getPrototypeOf(obj)获取对象的原型对象，通过Object.setPrototypeOf(obj, newProto)设置对象的原型对象</li></ul> <p>3、<strong>兼容性</strong>：</p> <ul><li>__proto__在所有现代浏览器和Node.js环境中都可用，但并不是ECMAScript标准的一部分，因此在某些严格模式下可能会引起问题</li></ul> <p>4、<strong>限制</strong>：</p> <ul><li>由于__proto__可能与某些对象字面量中的属性冲突（例如，如果对象字面量中有__proto__属性），因此使用时需要小心</li></ul> <p><strong>总结</strong>：</p> <ul><li>规范性：[[Prototype]]是ECMAScript规范的一部分，而__proto__不是。</li> <li>访问方式：[[Prototype]]通常通过语言提供的API访问，而__proto__可以直接访问。</li> <li>可枚举性：[[Prototype]]不可枚举，而__proto__可以作为对象的属性被访问和修改。</li> <li>实现：[[Prototype]]是内部机制，而__proto__是语言层面的实现。</li></ul> <h3 id="说一个原型里比较少人知道的特性？"><a href="#说一个原型里比较少人知道的特性？" aria-hidden="true" class="header-anchor">#</a> 说一个原型里比较少人知道的特性？</h3> <p>在 ES3 时代，只有访问属性的 get 操作能触发对原型链的查找。在 ES5 时代，新增了 accessor property 访问器属性的概念。它可以定义属性的 getter/setter 操作。</p> <p>具有访问器属性 setter 操作的对象，作为另一个对象的原型的时候，设置属性的 set 操作，也能触发对原型链的查找。</p> <p>普通对象的 <strong>proto</strong> 属性，其实就是在原型链查找出来的(<code>get __proto__</code>)，它定义在 Object.prototype 对象上。</p> <p><strong>补充</strong>：</p> <p>Symbol.hasInstance：允许自定义 instanceof 操作符的行为。通过在构造函数的原型上定义 Symbol.hasInstance 方法，可以控制实例检查的逻辑</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">CustomType</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> instance<span class="token punctuation">.</span>customProperty <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> customProperty<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">CustomType</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="原型链有什么作用？"><a href="#原型链有什么作用？" aria-hidden="true" class="header-anchor">#</a> 原型链有什么作用？</h3> <p>在访问一个对象的属性时，实际上是在查询原型链。这个对象是原型链的第一个元素，先检查它是否包含属性名，如果包含则返回属性值，否则检查原型链上的第二个元素，以此类推。</p> <h3 id="原型继承是什么意思？"><a href="#原型继承是什么意思？" aria-hidden="true" class="header-anchor">#</a> 原型继承是什么意思？</h3> <p>原型继承是js中实现对象属性和方法共享的一种机制。在js中，对象可以继承另一个对象的属性和方法，这种继承关系是通过原型链来实现</p> <p>JavaScript 通过<code>[[Prototype]]</code>实现原型继承，也就是<code>__proto__</code></p> <p>通过 Object.create 或者 Object.setPrototypeOf 显式继承另一个对象，将它设置为原型</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> superObj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> subObj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>superObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
subObj<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> superObj<span class="token punctuation">;</span> <span class="token comment">// true;</span>
</code></pre></div><p>或者通过 constructor 构造函数，在使用 new 关键字实例化时，会自动继承 constructor 的 prototype 对象，作为实例的原型</p> <h3 id="如何实现原型继承？"><a href="#如何实现原型继承？" aria-hidden="true" class="header-anchor">#</a> 如何实现原型继承？</h3> <ul><li><p>通过原型链继承，直接修改原型对象：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>property <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">method</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'SuperType method called'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 调用SuperType构造函数</span>
  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 让SubType的实例的原型指向SuperType的实例</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 或者 Object.create(SuperType.prototype)</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SubType
</code></pre></div></li> <li><p>通过构造函数 constructor 继承：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello, '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 调用SuperType构造函数</span>
  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>组合继承:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello, '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 借用构造函数继承</span>
<span class="token punctuation">}</span>
<span class="token comment">// 原型链继承</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SubType<span class="token punctuation">;</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayBye</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Bye, '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li> <li></li> <li><p>通过 Object.create 或者 Object.setPrototypeOf 显式继承另外一个对象，将它设置为原型</p></li> <li><p>通过 constructor 构造函数，在使用 new 关键字实例化时，会自动继承 constructor 的 prototype 对象，作为实例的原型</p></li> <li><p>在 ES6 中提供了 class ，背后跟 constructor 工作方式一样，写起来更内聚一些。</p></li></ul> <h3 id="说一下类继承的原理？"><a href="#说一下类继承的原理？" aria-hidden="true" class="header-anchor">#</a> 说一下类继承的原理？</h3> <p>class extends 方式继承，本质上也是基于原型,</p> <ul><li>es5 的继承，实质是先创建子类的实例对象 this，然后将父类实例对象的属性和方法，加到 this 上面（Parent.applt(this))</li> <li>es6 的继承，实质是先将父类实例对象的属性和方法，加到 this 上面（所以必须先调用 super），然后再用子类构造函数修改 this</li></ul> <p>其余区别点：</p> <ol><li>function 可以变量提升，class 不可以
</li></ol> <p>补充：prototype和__proto__是两个与原型链相关但用途和行为不同的属性</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p><strong>prototype</strong></p> <ul><li>用途：prototype属性是函数特有的，它是一个对象，包含了通过该构造函数创建的所有实例的共享属性和方法</li> <li>定义：当你创建一个类或构造函数时，JavaScript会自动设置其prototype属性，以便新创建的对象可以继承这些属性和方法</li> <li>访问：通常通过构造函数访问，例如：FunctionName.prototype</li> <li>目的：用于定义所有实例共享的属性和方法</li> <li>影响：修改prototype可以在不改变现有实例的情况下修改构造函数的原型对象</li></ul> <p><strong><strong>proto</strong></strong></p> <ul><li>用途：__proto__是一个对象的属性，它指向该对象的原型（即内部属性[[Prototype]]]）</li> <li>定义：当你创建一个对象时，它会自动获得一个__proto__属性，该属性引用了创建它的构造函数的prototype属性</li> <li>访问：可以通过实例访问，例如：newObject.<strong>proto</strong></li> <li>目的：用于实现实例与原型的链接</li> <li>影响：修改__proto__会直接影响实例的原型链接</li></ul> <h3 id="类继承的实现方式"><a href="#类继承的实现方式" aria-hidden="true" class="header-anchor">#</a> 类继承的实现方式</h3> <p>步骤：</p> <p>1、原型继承</p> <p><code>subClass.prototype.__proto__ === superClass.prototype</code></p> <p>subClass.prototype = Object.create(superClass.prototype);</p> <p><code>subClass.__proto__ === superClass</code></p> <p>Object.setPrototypeOf(subClass, superClass);</p> <p>2、调用父类构造函数</p> <p>_this = _possibleConstructorReturn(this, Super.call(this, name));</p> <p>理解：Class 作为构造函数的语法糖，同时有<code>prototype</code>属性和<code>__proto__</code>属性，因此同时存在两条继承链：</p> <ul><li>作为一个对象，子类（<code>B</code>）的原型（<code>__proto__</code>属性）是父类（<code>A</code>） 即 subClass.<strong>proto</strong> === superClass ；</li> <li>作为一个构造函数，子类（<code>B</code>）的原型对象（<code>prototype</code>属性）是父类的原型对象（<code>prototype</code>属性）的实例 即 subClass.prototype._<em>proto</em>_ === superClass.prototype</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// B 的实例继承 A 的实例</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// B 继承 A 的静态属性</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>实现 A extends B</p> <p>es6</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 向父类传参</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// this 必须在 super() 下面使用</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">sayBye</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Bye, '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>es5</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 父类</span>
<span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">speak</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' makes a noise.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 子类</span>
<span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> breed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 继承父类构造函数</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>breed <span class="token operator">=</span> breed<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 设置子类原型</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Dog<span class="token punctuation">;</span> <span class="token comment">// 修复构造函数指向</span>

<span class="token comment">// 子类方法</span>
<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bark</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' says woof!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 创建子类实例</span>
<span class="token keyword">var</span> myDog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'Buddy'</span><span class="token punctuation">,</span> <span class="token string">'Golden Retriever'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myDog<span class="token punctuation">.</span><span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &quot;Buddy makes a noise.&quot;</span>
myDog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &quot;Buddy says woof!&quot;</span>
</code></pre></div><h3 id="new-操作符做了什么？"><a href="#new-操作符做了什么？" aria-hidden="true" class="header-anchor">#</a> new 操作符做了什么？</h3> <p>当一个函数被使用 <code>new</code> 操作符执行时，它按照以下步骤：</p> <ol><li>创建新对象：const person = new Person('Alice');</li> <li>设置原型：person._<em>proto_</em> = Person.prototype</li> <li>执行构造函数：Person.call(person, 'Alice')，这里 call 方法将 Person函数的 this 绑定到新对象 person上，并传入参数 Alice</li> <li>返回新对象：如果 Person 函数没有显示返回一个对象，那么new操作符返回步骤1中创建的新对象 person</li></ol> <h3 id="如何实现一个new函数呢？"><a href="#如何实现一个new函数呢？" aria-hidden="true" class="header-anchor">#</a> 如何实现一个<code>new</code>函数呢？</h3> <ol><li>创建一个 myNew 函数，接收两个参数：构造函数和参数数组</li> <li>创建新对象，并将构造函数的 prototype 赋值给新对象的原型</li> <li>改变this指向，使用 Function.prototype.call 或者 Function.prototype.apply 调用构造函数，并将this指向新创建的对象</li> <li>处理返回值，如果构造函数返回一个对象，则返回该对象；否则返回步骤2中创建的对象</li></ol> <p>A：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">myNew</span><span class="token punctuation">(</span><span class="token parameter">constructor<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建一个新对象，其原型指向构造函数的prototype</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
    <span class="token comment">// 改变this指向</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token comment">// 生成一个实例对象</span>
    <span class="token comment">// 如果返回值是一个对象，且不是null，则返回该对象</span>
    <span class="token comment">// 否则返回创建的新对象</span>
    <span class="token keyword">return</span> result <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> result <span class="token punctuation">:</span> obj
  <span class="token punctuation">}</span>

  <span class="token comment">// 示例使用</span>
  <span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHello</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token function">myNew</span><span class="token punctuation">(</span>Person<span class="token punctuation">,</span> <span class="token string">'Alice'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  person<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &quot;Hello, my name is Alice&quot;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="如何保证函数必须要用-new-调用？"><a href="#如何保证函数必须要用-new-调用？" aria-hidden="true" class="header-anchor">#</a> 如何保证函数必须要用 new 调用？</h3> <ol><li>使用严格模式:</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">'use strict'</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">User</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&quot;Cannot call a class as a function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>函数内部检查this的类型是否为对象：if (typeof this !== 'object') throw new TypeError</li> <li>函数内部检查this是否为该构造函数的实例：if (!(this instanceof User)) throw new TypeError</li> <li>使用 new.target 方法</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">new</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'MyClass must be called with the new operator'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'kk'</span>
<span class="token punctuation">}</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 抛出错误</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出错误信息</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 &quot;Kimi&quot;</span>
</code></pre></div><h3 id="什么是闭包？"><a href="#什么是闭包？" aria-hidden="true" class="header-anchor">#</a> 什么是闭包？</h3> <p>闭包是指有权访问另一个函数作用域中的变量的函数。即使外部函数已经执行完毕，闭包仍能记住并访问其作用域中的变量</p> <p>闭包是基于词法作用域书写代码时所产生的自然结果。当函数记住并访问所在的词法作用域(词法环境[[Environment]])，闭包就产生了。</p> <p><strong>闭包的优点</strong>
闭包允许函数操作定义时的作用域中的变量，使得这些变量即使在定义它们的外部函数执行完毕后仍然可以被访问和操作</p> <p><strong>闭包的缺点</strong>
如果不正确使用闭包，可能会导致内存泄漏，因为闭包引用的变量不能被垃圾回收器回收</p> <h3 id="为什么说-js-中函数都是天生闭包的？"><a href="#为什么说-js-中函数都是天生闭包的？" aria-hidden="true" class="header-anchor">#</a> 为什么说 JS 中函数都是天生闭包的？</h3> <ol><li>词法作用域：js使用词法作用域，意味着函数的作用域是由函数声明的位置决定而不是函数调用的位置决定，因此函数可以访问其声明时所在的作用域中的变量</li> <li>函数作为一等公民：在js，函数与其他类型的变量一样，可以作为参数传递给其他函数，可以作为其他函数的返回结果，这种灵活性使得函数可以携带其词法作用域中的变量</li> <li>函数嵌套：函数可以嵌套定义，内层函数可以访问外层函数的变量，即使外层函数已经执行完毕，这种嵌套关系自然形成了闭包</li> <li>延迟执行：函数可以被延迟执行，这种情况下，函数仍可以访问其创建时的作用域中的变量，即使这些变量在函数被调用时可能已经不在作用域中</li></ol> <p>JavaScript 中的函数会自动通过隐藏的 <code>[[Environment]]</code> 属性记住创建它们的位置，所以它们都可以访问外部变量，能访问外部变量就产生了闭包。</p> <p>注意：如果我们使用 <code>new Function</code> 创建一个函数，那么该函数的 <code>[[Environment]]</code> 并不指向当前的词法环境，而是指向全局环境。</p> <p>因此，此类函数无法访问外部（outer）变量，只能访问全局变量。</p> <p>应用：缓存一些变量，可以用闭包，不一定非要用类的方式去缓存</p> <h3 id="什么是作用域链？"><a href="#什么是作用域链？" aria-hidden="true" class="header-anchor">#</a> 什么是作用域链？</h3> <p>函数的作用域在函数定义的时候就决定了。</p> <p>作用域链，是函数执行上下文中的一部分。当查找变量的时候，会先从当前上下文的变量对象中查找，如果没有找到，就会从<strong>父级(词法层面上的父级)执行上下文</strong>的变量对象中查找，一直找到全局上下文的变量对象，也就是全局对象。这样由多个执行上下文的变量对象构成的<strong>链表</strong>就叫做作用域链。</p> <h3 id="this-指向有哪几种？"><a href="#this-指向有哪几种？" aria-hidden="true" class="header-anchor">#</a> this 指向有哪几种？</h3> <ul><li>函数的执行上下文联系在一起，普通函数执行指向调用函数的对象</li> <li>new 调用构造函数，指向实例化的对象</li> <li>箭头函数没有 this，它只会从自己的作用域链的上一层继承 this</li> <li>bind，call，apply 指向指定的 this</li></ul> <h3 id="call、apply、bind-的区别？"><a href="#call、apply、bind-的区别？" aria-hidden="true" class="header-anchor">#</a> call、apply、bind 的区别？</h3> <ul><li>call、apply 和 bind 都有一个共同点，能都改变 this 的指向，即改变函数执行上下文</li> <li>call 和 apply 调用对象必须是一个函数，并且他们是立即执行的，而 bind 是创建一个新的函数，只会在调用这个新函数时执行</li> <li>而 call 和 apply 的区别主要体现在传参方式上，call 从第二个参数开始可以接收任意个参数，apply 的第二个参数必须是数组或类数组</li></ul> <h3 id="执行上下文"><a href="#执行上下文" aria-hidden="true" class="header-anchor">#</a> 执行上下文</h3> <p>执行函数前的准备工作，也就是函数的执行环境</p> <p>在 ES5 中，我们改进了命名方式，把执行上下文最初的三个部分改为下面这个样子</p> <ul><li>lexical environment：词法环境，当获取变量时使用，也叫<strong>作用域链</strong></li> <li>variable environment：变量环境，当声明变量时使用，<strong>变量对象</strong></li> <li>this value：<strong>this 值</strong></li></ul> <p>在 ES2018 中，执行上下文又变成了这个样子，this 值被归入 lexical environment，但是增加了不少内容。</p> <ul><li>lexical environment：词法环境，当获取变量或者 this 值时使用。</li> <li>variable environment：变量环境，当声明变量时使用。</li> <li>code evaluation state：用于恢复代码执行位置。</li> <li>Function：执行的任务是函数时使用，表示正在被执行的函数。</li> <li>ScriptOrModule：执行的任务是脚本或者模块时使用，表示正在被执行的代码。</li> <li>Realm：使用的基础库和内置对象实例。</li> <li>Generator：仅生成器上下文有这个属性，表示当前生成器。</li></ul> <p>词法环境</p> <h3 id="深拷贝与浅拷贝的区别？"><a href="#深拷贝与浅拷贝的区别？" aria-hidden="true" class="header-anchor">#</a> 深拷贝与浅拷贝的区别？</h3> <p>浅拷贝只是拷贝值的引用，深拷贝会拷贝所有的属性，并拷贝属性指向动态分配的内存地址</p> <ul><li>如果是基本类型，浅拷贝的结果互不影响</li> <li>如果是对象或数组，浅拷贝只是拷贝引用，对原数据或拷贝结果之一做更改，两者都会更新</li> <li>如果是深拷贝，基本类型和复杂类型都是两者分离，互不影响</li></ul> <h3 id="实现深拷贝"><a href="#实现深拷贝" aria-hidden="true" class="header-anchor">#</a> 实现深拷贝</h3> <ol><li>Json.parse(Json.stringify(obj)) 忽略 undefined、symbol、function 等类型</li> <li>第三方库lodash的 cloneDeep()</li> <li>手写递归函数：deepClone(obj, hash = new WeakMap())</li> <li>使用es6的proxy</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 递归函数</span>
<span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> hash <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> obj <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>hash<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> hash<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 处理循环引用</span>

  <span class="token keyword">let</span> cloneObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  hash<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> cloneObj<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cloneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> hash<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 递归</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> cloneObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="实现浅拷贝"><a href="#实现浅拷贝" aria-hidden="true" class="header-anchor">#</a> 实现浅拷贝</h3> <ol><li>Object.assign({}, obj)</li> <li>展开运算符 [...arr]</li> <li>arr.slice(0)、arr.concat()</li> <li>shallowClone(obj)</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">shallowClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cloneObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> cloneObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cloneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> cloneObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="什么是深度遍历和广度遍历？"><a href="#什么是深度遍历和广度遍历？" aria-hidden="true" class="header-anchor">#</a> 什么是深度遍历和广度遍历？</h3> <ul><li>深度遍历：是指优先遍历每个节点的所有节点，结束后再遍历其余节点
<ul><li>实现方式：通常使用递归或显示栈</li></ul></li> <li>广度遍历：是指优先按一层层来遍历，每层搜索完再搜索下一层
<ul><li>实现方式：通常使用队列</li></ul></li></ul> <p>写一个深度和广度遍历函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 深度遍历</span>
<span class="token keyword">const</span> dfs <span class="token operator">=</span> <span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> visited <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  visited<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>visited<span class="token punctuation">)</span>
  node<span class="token operator">?</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">dfs</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> visited<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 广度遍历</span>
<span class="token keyword">const</span> <span class="token function-variable function">bfs</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> origin <span class="token operator">=</span> Arrary<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token operator">?</span> root <span class="token punctuation">:</span> <span class="token punctuation">[</span>root<span class="token punctuation">]</span>
  origin<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">rootItem</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> quene <span class="token operator">=</span> <span class="token punctuation">[</span>rootItem<span class="token punctuation">]</span> <span class="token comment">// 队列默认第一项</span>
    <span class="token keyword">const</span> visited <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">while</span> <span class="token punctuation">(</span>quene<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 开始循环队列</span>
      <span class="token keyword">const</span> node <span class="token operator">=</span> quene<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        visited<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token comment">// 记录节点</span>
        node<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            quene<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span> <span class="token comment">// 将未访问的子节点加入队列</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="请分别用深度优先思想和广度优先思想实现一个拷贝函数？"><a href="#请分别用深度优先思想和广度优先思想实现一个拷贝函数？" aria-hidden="true" class="header-anchor">#</a> 请分别用深度优先思想和广度优先思想实现一个拷贝函数？</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> dfClone <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">,</span> hash <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> obj <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span> obj
  <span class="token keyword">if</span> <span class="token punctuation">(</span>hash<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> hash<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token keyword">const</span> cloneObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  hash<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> cloneObj<span class="token punctuation">)</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cloneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">dfClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> hash<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">bfClone</span> <span class="token operator">=</span> <span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> obj <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span> obj
  <span class="token keyword">let</span> quene <span class="token operator">=</span> <span class="token punctuation">[</span>obj<span class="token punctuation">]</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span>quene<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> current <span class="token operator">=</span> quene<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span>
</code></pre></div><h3 id="new-set-应用场景"><a href="#new-set-应用场景" aria-hidden="true" class="header-anchor">#</a> new Set() 应用场景</h3> <p>Set 是 JavaScript 中一种集合类型，它类似于数组，但成员的值是唯一的，没有重复的值</p> <p><strong>应用场景</strong></p> <ol><li>数组去重</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> uniqueNumbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>new <span class="token class-name">Set</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// [1,2,3,4,5]</span>
</code></pre></div><ol start="2"><li>集合操作：求并集、交集、差集</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> setA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> setB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> union <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>setA<span class="token punctuation">,</span> <span class="token operator">...</span>setB<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 并集</span>
<span class="token keyword">const</span> intersection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>setA<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> setB<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 交集</span>
<span class="token keyword">const</span> difference <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>setA<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>setB<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 差集</span>
</code></pre></div><ol start="3"><li>快速查找某个值是否存在集合中</li></ol> <h3 id="set、map、weakset、weakmap-的区别？"><a href="#set、map、weakset、weakmap-的区别？" aria-hidden="true" class="header-anchor">#</a> Set、Map、WeakSet、WeakMap 的区别？</h3> <ul><li>Set：类似于数组，但成员的值都是唯一的，没有重复的值，<strong>值可以是任意类型</strong></li> <li>Map：类似于对象，是键值对的集合，<strong>键可以是任意值</strong></li> <li>WeakSet：<strong>只接受对象作为值</strong>，不能重复，可以用来存储对象的引用，垃圾回收机制会自动回收该对象</li> <li>WeakMap：<strong>只接受对象作为键名</strong>，不能重复，可以用来存储对象的引用，垃圾回收机制会自动回收该对象</li></ul> <h3 id="实现一个简单的模版字符串替换"><a href="#实现一个简单的模版字符串替换" aria-hidden="true" class="header-anchor">#</a> 实现一个简单的模版字符串替换</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;{{name}}很厉害,才{{age}}岁&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&quot;yolanda&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">24</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\{\{(.*?)\}\}/g</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>解析：</p> <ul><li>{{：匹配文字 {{。由于 { 是一个特殊字符，需要使用反斜杠 \ 进行转义</li> <li>(.<em>?)：匹配任意字符（. 表示任意字符，</em>? 表示非贪婪模式的任意次数），圆括号表示捕获组，用于捕获匹配的文本</li> <li>}}：匹配文字 }}。同样，} 也需要转义</li></ul> <h3 id="数组扁平化去重排序"><a href="#数组扁平化去重排序" aria-hidden="true" class="header-anchor">#</a> 数组扁平化去重排序</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 扁平化</span>
<span class="token keyword">const</span> res1 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 去重</span>
<span class="token keyword">const</span> res2 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 排序</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> res2<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>扩展：字母排序：使用<strong>localeCompare</strong>用于比较两个字符串，并根据本地环境的特定规则返回排序顺序</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> stringArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'lemon'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> uniqueStringArray <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>stringArray<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> sortedStringArray <span class="token operator">=</span> uniqueStringArray<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uniqueStringArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 [&quot;apple&quot;, &quot;banana&quot;, &quot;lemon&quot;, &quot;orange&quot;]</span>
</code></pre></div><h3 id="如何实现一个-flat-函数？"><a href="#如何实现一个-flat-函数？" aria-hidden="true" class="header-anchor">#</a> 如何实现一个 flat 函数？</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">flatten1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> arr
  <span class="token keyword">while</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>result<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">flatten2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> dept <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> currentVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> acc<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>dept <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>currentVal<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">flatten2</span><span class="token punctuation">(</span>currentVal<span class="token punctuation">,</span> dept <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> currentVal<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="什么是节流？"><a href="#什么是节流？" aria-hidden="true" class="header-anchor">#</a> 什么是节流？</h3> <ul><li>定义：节流是一种限制函数执行频率的技术，确保函数在指定的时间间隔内最多执行一次</li> <li>用例：比如指定时间为 300ms，那在 1000ms 内，如果你触发了 10 次事件，但也只会执行 3 次</li> <li>场景：滚动、窗口缩放、鼠标移动等等，适用于频繁触发但无需每次都执行</li></ul> <p>（节流是事件触发多次，控制在规定时间内只执行 1 次，把多个事件控制在 ms 执行分片执行，用加锁的方法来控制节流）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> limit</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> inThrottle
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>inThrottle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
      inThrottle <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        inThrottle <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> limit<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="什么是防抖？"><a href="#什么是防抖？" aria-hidden="true" class="header-anchor">#</a> 什么是防抖？</h3> <ul><li>定义：防抖是一种确保函数在最后一次触发后等指定时间间隔结束后才执行的技术</li> <li>用例：比如指定时间是300ms，那在100ms内触发了10次，只会在最后一次触发后等待300ms再执行函数</li> <li>场景：适用于需要在事件停止触发后执行的场景，比如搜索框输入、按钮点击等等</li></ul> <p>（防抖是事件连续触发多次，控制在触发结束后的规定时间内执行 1 次，
连续事件触发结束后只触发一次，用去除定时器的方法）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">debounce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    timer <span class="token operator">&amp;&amp;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
    
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>区别</strong></p> <ul><li>节流保证在指定时间间隔内至少执行一次函数</li> <li>防抖保证在指定时间间隔结束后才执行一次函数</li></ul> <h3 id="垃圾回收机制-星巴克科技"><a href="#垃圾回收机制-星巴克科技" aria-hidden="true" class="header-anchor">#</a> 垃圾回收机制 (星巴克科技)</h3> <p>定义：垃圾回收是一种自动内存管理机制，用于识别和回收不再<strong>使用的内存</strong>，从而释放内存资源</p> <ol><li>为什么要回收？</li></ol> <ul><li>JavaScript 创建变量、对象、函数时需要<strong>动态分配内存</strong>，如果不对这些内存进行回收就会导致系统奔溃</li></ul> <ol start="2"><li>什么时候回收？</li></ol> <ul><li>根据内存的使用情况，当内存达到阀值或者对象不再被引用时会进行回收</li></ul> <ol start="3"><li><p>常用的垃圾回收方法有两种：引用计数 和 标记计数</p> <ul><li>引用计数：当一个对象的引用次数变为0时，即没有任何变量或对象引用它，该对象就会被垃圾回收器回收，但引用计数无法解决循环依赖的问题</li> <li>标记计数：垃圾回收器会从全局对象开始，递归地访问所有可达的对象，将它们标记为“活跃”。未被标记的对象被认为是“垃圾”，随后会被回收，解决了循环依赖的问题</li></ul></li></ol> <h3 id="事件循环"><a href="#事件循环" aria-hidden="true" class="header-anchor">#</a> 事件循环</h3> <p>JavaScript 代码执行过程中，所有任务都是需要排队的，前一个任务结束，才会执行后一个任务。</p> <p>而任务有两种：同步任务和异步任务，异步任务是指不进入主线程，而进入<strong>任务队列</strong>的任务，只有<strong>任务队列</strong>通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。</p> <p>这样一个执行过程，我们称为<strong>事件循环</strong>，它是一个等待任务、执行任务和进入休眠状态等待更多任务之间转换的无限循环</p> <p><strong>任务队列</strong></p> <p>任务队列中又分为<strong>宏任务</strong> macro-task 和<strong>微任务</strong> micro-task，在最新标准中它们被称为 task 和 jobs</p> <p>宏任务一般有：srcipt 脚本、setTimeout、setInternal、UI render</p> <p>微任务一般有：promise.then、MutationObserver、process.nextTick</p> <p>任务队列执行：</p> <ul><li>事件循环首先检查微任务队列，然后才是宏任务队列</li> <li>微任务队列中的所有任务执行完成后，才会处理下一个宏任务</li></ul> <p>代码执行顺序：</p> <ol><li>同步任务：首先执行同步任务，如函数调用、表达式计算等等</li> <li>微任务：执行所有微任务队列中的任务</li> <li>宏任务：执行一个宏任务（如setTimeout的回调）</li> <li>UI渲染：通常在宏任务与宏任务之间，或者在宏任务执行完毕后进行</li> <li>事件循环：重复步骤2～4，直到调用栈和事件队列为空</li></ol> <p>执行顺序：456-&gt;789-&gt;000(UI更新)-&gt;nextTick 111-&gt;nextTick 333(UI更新)-&gt;nextTick 555(UI更新)-&gt;setTimeout 222(UI更新)-&gt;setTimeout 444(UI更新)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'456'</span><span class="token punctuation">;</span> <span class="token comment">// 执行 1 但 UI 没更新</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'222'</span><span class="token punctuation">;</span> <span class="token comment">// 执行 7 UI 更新为 222</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'789'</span><span class="token punctuation">;</span> <span class="token comment">// 执行 2 但 UI 没更新</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'111'</span><span class="token punctuation">;</span> <span class="token comment">// 执行 4 但 UI 没更新</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'555'</span><span class="token punctuation">;</span> <span class="token comment">// 执行 6 UI 更新为 555</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'333'</span><span class="token punctuation">;</span> <span class="token comment">// 执行 5 UI 更新为 333</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'444'</span><span class="token punctuation">;</span> <span class="token comment">// 执行 888 UI 更新为 444</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">'000'</span><span class="token punctuation">;</span> <span class="token comment">// 执行 3 UI 更新为 000</span>
<span class="token punctuation">}</span>
</code></pre></div><p>所谓<strong>回调函数</strong>，就是被主线程挂起的代码，异步任务必须指定回调函数，当主线程开始执行异步任务，就是在执行对应的回调函数</p> <p>浏览器中 JavaScript 的执行流程和 Node.js 中的流程都是基于 <strong>事件循环</strong> 的。</p> <p>引擎的一般算法：</p> <ol><li>当有任务时，从最先进入的任务开始执行。</li> <li>休眠直到出现任务，然后转到第 1 步。</li></ol> <p>设置任务 —— 引擎处理它们 —— 然后等待更多任务（即休眠，几乎不消耗 CPU 资源）</p> <p>注意：</p> <ul><li>引擎执行任务时永远不会进行渲染（render）。如果任务执行需要很长一段时间也没关系。仅在任务完成后才会绘制对 DOM 的更改。</li> <li>如果一项任务执行花费的时间过长，浏览器将无法执行其他任务，无法处理用户事件，因此，在一定时间后浏览器会在整个页面抛出一个如“页面未响应”之类的警报，建议你终止这个任务。</li></ul> <p>所以，一般是一个任务结束后，清空微任务队列，然后就进行页面渲染，因为 js 线程和渲染 ui 线程互斥，当 js 线程运行的时候，ui 线程处于冻结状态。</p> <h3 id="宏任务"><a href="#宏任务" aria-hidden="true" class="header-anchor">#</a> 宏任务</h3> <p><strong>任务</strong> 就是由执行诸如从头执行一段程序、执行一个事件回调或一个 interval/timeout 被触发之类的标准机制而被调度的任意 JavaScript 代码。这些都在 **任务队列（task queue）**上被调度。</p> <p>任务也称为宏任务，一般下面几种都是宏任务</p> <ul><li>script 脚本</li> <li>click、mousemove 等交互事件</li> <li>ajax</li> <li>setTimeout</li> <li>...</li></ul> <p>多个任务组成了一个队列，即所谓的“宏任务队列”，即为<strong>macroTask queue</strong></p> <h3 id="微任务"><a href="#微任务" aria-hidden="true" class="header-anchor">#</a> 微任务</h3> <p>每当一个任务存在，事件循环都会检查该任务是否正把控制权交给其他 JavaScript 代码。如若不然，事件循环就会运行微任务队列中的所有微任务。</p> <p>在任务队列中的一个任务执行完后，就会清空当前微任务队列所有的微任务。</p> <p>微任务为以下这种</p> <ul><li>Promise</li> <li>process.nextTick</li> <li>queueMicrotask</li> <li>...</li></ul> <p>注意在 node 中，process.nextTick 队列在 Promise 队列前执行并清空</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;script start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTimeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>promise1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>promise2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;script end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>打印结果：script start =&gt; script end =&gt; promise1 =&gt; promise2</p> <p>分析：</p> <p>每个线程都有它自己的 event loop 事件循环，event loop 会一直执行进入宏任务队列的任务，每执行一个宏任务结束后，会取出微任务队列中的所有微任务，执行完后进行页面渲染（task-&gt;渲染-&gt;task-&gt;...）</p> <p>setTimeout 的作用是等待给定的时间后为它的回调产生一个<strong>新的宏任务</strong>。这就是为什么打印‘setTimeout’在‘script end’之后。因为打印‘script end’是第一个宏任务里面的事情，而‘setTimeout’是另一个独立的任务里面打印的。</p> <p>写一个 promise 任务调用器</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Scheduler</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">maxCount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maxCount <span class="token operator">=</span> maxCount<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 并发请求</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">||</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span>length <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>index <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>index<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>index<span class="token operator">--</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="async-await"><a href="#async-await" aria-hidden="true" class="header-anchor">#</a> async/await</h3> <p>async/await 是异步编程的终极方案，是结合 promise + generator 的语法糖，允许我们以同步的方式编写异步的代码。</p> <ul><li>通过 async 关键字声明的函数，会把函数返回的值（如果不是 promise）包装在一个 resolved 的 promise 中返回</li> <li>在函数内部可以使用 await 关键字，让 JavaScript 引擎等待 await 表达式执行完毕，再执行 await 后面的代码，相当于 promise.then</li></ul> <hr> <div class="language- extra-class"><pre class="language-text"><code>内部是对 Promise 和 Generator 的封装，初始调用 generator.next 启动生成器函数，生成器函数内部调用 yield promise 把控制权交给外部，之后外部又通过 promise.then 获得结果并将结果传给 generator.next 函数，把控制权又交给生成器内部，不断循环以上步骤，直到所有异步函数都执行完毕
</code></pre></div><hr> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;script start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async f1 start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 如果 async2 没有返回值 入队1</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async f1 end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async f2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTimeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 入队2</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise.then1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 入队3</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise.then2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>执行结果</strong>：</p> <ol><li>script start</li> <li>async f1 start</li> <li>async f2</li> <li>promise</li> <li>async f1 end</li> <li>promise.then1</li> <li>promise.then2</li> <li>setTimeout</li></ol> <p><strong>如果 f2 返回一个 promise.resolve.then</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;script start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async f1 start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async f1 end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async f2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 入队 1，执行后才会将 await 后的代码入队</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async f2 then end1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTimeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise.then1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 入队2</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise.then2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 入队3</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>执行结果</strong>:</p> <ol><li>script start  同步执行</li> <li>async f1 start  同步执行</li> <li>async f2  同步执行</li> <li>promise  同步执行</li> <li>async f2 then end1  执行微任务队列</li> <li>promise.then1  执行微任务队列</li> <li>promise.then2  执行微任务队列</li> <li>async f1 end  执行微任务队列</li> <li>setTimeout</li></ol> <h3 id="promise"><a href="#promise" aria-hidden="true" class="header-anchor">#</a> Promise</h3> <p>promise 是异步编程的解决方案，能够将<strong>生产者代码</strong>和<strong>消费者代码</strong>连接在一起的一个特殊 JavaScript 对象。</p> <ul><li><p>当生产者代码成功获取结果，会调用 resolve 将结果传递出去；如果失败则通过 reject 传递 error；</p></li> <li><p>消费者通过 promise 实例的 then/catch 方法获取生产者的结果</p></li></ul> <p>应用：</p> <p>promise 解决了回调地狱的问题，在基于回调实现异步编程时，如果想要实现多个生产者代码和消费者代码依次传递结果时，就要进行多层嵌套绑定，导致代码难以阅读和维护。</p> <p>如果使用 promise 的话，因为生产者代码和消费者代码是分离设计，可以链式调用，解决了深层嵌套的问题</p> <p>promise 有三个状态：pending 等待、fulfilled 执行、rejected 拒绝；一旦 promise 被 resolve 或者 reject，就不能再改变为其他状态</p> <p>基本过程：</p> <ol><li>初始化 promise（pending）</li> <li>立即执行 promise 中传入的 fn 函数，将 promise 内部的 resolve、reject 函数作为参数传递给 fn</li> <li>执行 then 方法，注册回调处理数组（同一个 promise 可以调用多次 then）</li></ol> <p>**Promise.all() **接收一个 Promise 实例的数组，采用计数方式，每当一个 Promise 实例的状态变成 fulfilled 后就保存该实例返回的数据，并 将计数减 1，当计数器变为 0 时，代表数组中所有的 Promise 实例都执行完毕，然后执行 then 方法</p> <p>Promise 20 行简单手写</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES6</span>
<span class="token keyword">class</span> <span class="token class-name">MyPromise</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">executor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">undefined</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>reason <span class="token operator">=</span> <span class="token keyword">undefined</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onFullfilled <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onRejected <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token function">executor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_resolve<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_reject<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">_resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value
    <span class="token keyword">this</span><span class="token punctuation">.</span>onFullfilled<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">_reject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>reason <span class="token operator">=</span> reason
    <span class="token keyword">this</span><span class="token punctuation">.</span>onRejected<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">onFulfilled<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>onFullfilled<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">onFulfilled</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>onFullfilled<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">onRejected</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES5</span>
<span class="token keyword">function</span> <span class="token function">MyPromise</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>cbs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>cbs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">fn</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">MyPromise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">then</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">onResolved</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cbs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">onResolved</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token keyword">instanceof</span> <span class="token class-name">MyPromise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/Notebook/assets/img/image.1bf5105e.png" alt="">
手写 promiseA+规范</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">PENDING</span> <span class="token operator">=</span> <span class="token string">&quot;pending&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 等待态</span>
<span class="token keyword">const</span> <span class="token constant">FULFILLED</span> <span class="token operator">=</span> <span class="token string">&quot;fulfilled&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 执行态</span>
<span class="token keyword">const</span> <span class="token constant">REJECTED</span> <span class="token operator">=</span> <span class="token string">&quot;rejected&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 拒绝态</span>

<span class="token keyword">class</span> <span class="token class-name">MyPromise</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>error <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token constant">PENDING</span><span class="token punctuation">;</span>
    <span class="token comment">// 当promise为pending状态时，存储回调函数</span>
    <span class="token comment">// 用于实现异步串行</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onFulfilledCallbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onRejectedCallbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token constant">FULFILLED</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token comment">// callback(this.value);</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>onFulfilledCallbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">reject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token constant">REJECTED</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>error <span class="token operator">=</span> error<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>onRejectedCallbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// onFulfilled 当 promise 执行结束后其必须被调用，其第一个参数为 promise 的终值</span>
  <span class="token comment">// onRejected 当 promise 被拒绝执行后其必须被调用，其第一个参数为 promise 的据因</span>
  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">onFulfilled<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> bridgePromise<span class="token punctuation">;</span>
    <span class="token comment">// 默认给个函数</span>
    onFulfilled <span class="token operator">=</span>
      <span class="token keyword">typeof</span> onFulfilled <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">?</span> <span class="token function-variable function">onFulfilled</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">;</span>
    onRejected <span class="token operator">=</span>
      <span class="token keyword">typeof</span> onRejected <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span>
        <span class="token operator">?</span> <span class="token function-variable function">onRejected</span>
        <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">FULFILLED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      bridgePromise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// A+规范，异步执行</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">onFulfilled</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">resolvePromise</span><span class="token punctuation">(</span>bridgePromise<span class="token punctuation">,</span> x<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> bridgePromise<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">REJECTED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      bridgePromise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">resolvePromise</span><span class="token punctuation">(</span>bridgePromise<span class="token punctuation">,</span> x<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> bridgePromise<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      bridgePromise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 处理异步resolve</span>
        <span class="token comment">// 回调函数放入 onFulfilledCallbacks 中</span>
        <span class="token comment">// 回调函数负责执行 onFulfilled 和 更新 bridgePromise 的状态</span>
        <span class="token comment">// promise.then().then()</span>
        <span class="token comment">// 当前 promise 的 onFulfilledCallbacks 里的回调函数</span>
        <span class="token comment">// 负责执行.then里面的回调函数和更新.then返回的bridgePromise状态</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>onFulfilledCallbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
              <span class="token comment">// 执行回调</span>
              <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">onFulfilled</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token comment">// resolve(x)下去</span>
              <span class="token function">resolvePromise</span><span class="token punctuation">(</span>bridgePromise<span class="token punctuation">,</span> x<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>onRejectedCallbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
              <span class="token comment">// onRejected如果不抛出异常，则为执行态</span>
              <span class="token comment">// 比如catch回调中如果不抛出异常，那么这个catch返回的就是执行态</span>
              <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">onRejected</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token function">resolvePromise</span><span class="token punctuation">(</span>bridgePromise<span class="token punctuation">,</span> x<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> bridgePromise<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">catch</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> onRejected<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">resolvePromise</span><span class="token punctuation">(</span><span class="token parameter">bridgePromise<span class="token punctuation">,</span> x<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 避免循环引用</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>bridgePromise <span class="token operator">===</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&quot;Circular reference&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 避免重复调用</span>
  <span class="token comment">/* 
    Promise.resolve().then(() =&gt; {
      return new Promise((resolve, reject) =&gt; {
        resolve();
        reject(); // 这种情况就要用called来避免重复调用
      })
    })

  */</span>
  <span class="token keyword">let</span> called <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在取 x.then 情况下，有可能出现异常</span>
    <span class="token comment">// 需要 try catch 包裹</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// 具有 then 方法的对象或者函数</span>
      <span class="token comment">// 比如是个Promise实例</span>
      <span class="token keyword">let</span> then <span class="token operator">=</span> x<span class="token punctuation">.</span>then<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> then <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果 then 是一个函数</span>
        <span class="token comment">// 以 x 为 this 调用 then 函数</span>
        <span class="token function">then</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>
          x<span class="token punctuation">,</span>
          <span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>called<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            called <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token function">resolvePromise</span><span class="token punctuation">(</span>bridgePromise<span class="token punctuation">,</span> y<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>called<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            called <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果 then 不是函数，以 x 为参数resolve promise</span>
        <span class="token comment">// .then(res =&gt; 123).then(x =&gt; console.log(x)) 透传</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果出错了也是不能继续调用resolve和reject函数</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>called<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      called <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果 x 不为对象或者函数，以 x 为参数执行 promise</span>
    <span class="token comment">// 设置 this.value</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

MyPromise<span class="token punctuation">.</span><span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token keyword">instanceof</span> <span class="token class-name">MyPromise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span>then <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value<span class="token punctuation">.</span>then <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

MyPromise<span class="token punctuation">.</span><span class="token function-variable function">reject</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

MyPromise<span class="token punctuation">.</span><span class="token function-variable function">all</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 做个标记进行统计</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      promises<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
          count<span class="token operator">++</span><span class="token punctuation">;</span>
          <span class="token comment">// 在放到count为promises.length的promise的onFulfilled回调中进行resolve</span>
          <span class="token comment">// 因为count如果为promises.length，则说明所有的promise都fulfilled了</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

MyPromise<span class="token punctuation">.</span><span class="token function-variable function">race</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      promises<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token comment">// 有个promise执行态了，就直接resolve</span>
        <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

MyPromise<span class="token punctuation">.</span><span class="token function-variable function">promisify</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>
        <span class="token keyword">null</span><span class="token punctuation">,</span>
        args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          err <span class="token operator">?</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

MyPromise<span class="token punctuation">.</span><span class="token function-variable function">deferred</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> defer <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  defer<span class="token punctuation">.</span>promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    defer<span class="token punctuation">.</span>resolve <span class="token operator">=</span> resolve<span class="token punctuation">;</span>
    defer<span class="token punctuation">.</span>reject <span class="token operator">=</span> reject<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> defer<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> MyPromise<span class="token punctuation">;</span>
</code></pre></div><h3 id="async-await、promise、promise-then-等执行顺序？"><a href="#async-await、promise、promise-then-等执行顺序？" aria-hidden="true" class="header-anchor">#</a> async/await、promise、promise.then 等执行顺序？</h3> <p><strong>如以下代码，他们的执行顺序为？</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 start'</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>执行顺序</strong>：</p> <ol><li>script start</li> <li>async1 start</li> <li>async2</li> <li>promise1</li> <li>script end</li> <li>async1 end</li> <li>promise2</li> <li>setTimeout</li></ol> <p><strong>解析</strong>：</p> <ol><li>首先，new Promise是同步的任务，会被放到主进程中去立即执行。而.then()函数是异步任务会放到异步队列中去，那什么时候放到异步队列中去呢？当你的promise状态结束的时候，就会立即放进异步队列中去了</li> <li>带async关键字的函数会返回一个promise对象，如果里面没有await，执行起来等同于普通函数；如果没有await，async函数并没有很厉害是不是</li> <li>await 关键字要在 async 关键字函数的内部，await 写在外面会报错；await如同他的语意，就是在等待，等待右侧的表达式完成。此时的await会让出线程，阻塞async内后续的代码，先去执行async外的代码。等外面的同步代码执行完毕，才会执行里面的后续代码。<strong>就算await的不是promise对象，是一个同步函数，也会等这样操作</strong></li></ol> <p><strong>图解</strong> <img src="/Notebook/assets/img/image5.67710144.png" alt=""></p> <h3 id="模块化"><a href="#模块化" aria-hidden="true" class="header-anchor">#</a> 模块化</h3> <p><strong>IFEE</strong>：通过闭包方式私有化变量</p> <p>缺点：模块化难以维护，依赖模糊</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> module <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token keyword">private</span> <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">private</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  $<span class="token punctuation">.</span><span class="token function-variable function">plugins</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">,</span>foo
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 456</span>
module<span class="token punctuation">.</span>private<span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre></div><p><strong>Commomjs</strong>：使用了一个同步的 require 方法去加载依赖项并且返回一个向外暴露的接口</p> <ul><li>特点：同步加载模块，适用于服务端渲染</li> <li>应用：主要用于 node.js 环境</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;module&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../file.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">doStuff</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> someValue<span class="token punctuation">;</span>
</code></pre></div><p><strong>AMD</strong>：</p> <ul><li>特点：异步模块，支持多个模块的同时并行加载，代表有 RequireJS</li> <li>应用：适用于浏览器环境，通过异步加载模块可以避免阻塞页面加载</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;../file&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string">&quot;mymodule&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;dep1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dep2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d1<span class="token punctuation">,</span> d2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> someExportedValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>EsModule</strong>：es6 引入的模块化方案</p> <ul><li>特点：使用 import 和 export 关键字，可按需加载，支持静态分析和tree shaking</li> <li>应用：适用于浏览器环境</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">doStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">doStuff1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p><strong>UMD</strong>：可以在各种环境中使用的模块化方案</p> <ul><li>特点：根据运行环境呢自动选择CommonJS或AMD模块加载方式</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">global<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span>
    <span class="token operator">?</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">:</span> <span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd
    <span class="token operator">?</span> <span class="token function">define</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span>
    <span class="token punctuation">:</span> <span class="token punctuation">(</span>global<span class="token punctuation">.</span>xxx <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// doSomething......</span>
  <span class="token keyword">var</span> xxx <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> xxx<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><table><thead><tr><th style="text-align:center;">类型</th> <th style="text-align:center;">CommonJS</th> <th style="text-align:center;">AMD</th> <th style="text-align:center;">ESModule</th> <th style="text-align:center;">UMD</th></tr></thead> <tbody><tr><td style="text-align:center;">加载方式</td> <td style="text-align:center;">同步</td> <td style="text-align:center;">异步</td> <td style="text-align:center;">动态</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">环境支持</td> <td style="text-align:center;">主要nodejs</td> <td style="text-align:center;">主要浏览器</td> <td style="text-align:center;">现代浏览器和nodejs</td> <td style="text-align:center;">主要浏览器</td></tr> <tr><td style="text-align:center;">语法</td> <td style="text-align:center;">require和modules.exports</td> <td style="text-align:center;">define和require</td> <td style="text-align:center;">import和export</td> <td style="text-align:center;">都可以</td></tr> <tr><td style="text-align:center;">性能</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;">配合工具tree shaking</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">兼容性</td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;"></td> <td style="text-align:center;">最好</td></tr></tbody></table> <h3 id="拖拽上传"><a href="#拖拽上传" aria-hidden="true" class="header-anchor">#</a> 拖拽上传</h3> <p>利用 h5 的 drag and drop API，主要有几个核心事件：</p> <p>有 A，B 两个容器，C 物体在 A 里面，当鼠标拖起 C 时，会触发 drag-start，离开 A 容器会触发 drag-leave，刚进入 B 容器就触发 drag-enter，完全悬浮在 B 里面会触发 drag-over，当鼠标放下 C 物体，就会触发 drop 事件并在结束后触发 drag-end 事件</p> <p>可以在 drop 事件中通过 e.dataTrandfer.files 获取目标物体的信息</p> <h3 id="大文件分片断点续传"><a href="#大文件分片断点续传" aria-hidden="true" class="header-anchor">#</a> 大文件分片断点续传</h3> <p>项目中的实现方式：</p> <ul><li>核心是利用 Blob.prototype.slice() 方法对文件进行分片处理</li> <li>通过 a1 接口获取文件的标识 id 和已存在服务器的资源长度 size （初始值为 0），</li> <li>通过轮询调用 a2 接口上传分片，请求体为 分片内容 + 文件标识 id，并且在请求头增加 Content-Range 告知服务器当前分片在文件中的起始位置</li> <li>只有当 a2 接口返回的 complete 字段为 true 才停止调用上传分片的 a2 接口，客户端发送文件合并的 a3 请求或服务端自行合并</li> <li>XHR 提供了 abort() 方法暂停切片上传</li></ul> <h3 id="esm-与-commonjs-的差异"><a href="#esm-与-commonjs-的差异" aria-hidden="true" class="header-anchor">#</a> esm 与 commonjs 的差异</h3> <p>首先肯定是语法上的差异，一个使用 <code>import/export</code> 语法，一个使用 <code>require/module</code> 语法。</p> <p>另一个 ESM 与 CommonJS 显著的差异在于，ESM 导入模块的变量都是强绑定，导出模块的变量一旦发生变化，对应导入模块的变量也会跟随变化，而 CommonJS 中导入的模块都是值传递与引用传递，类似于函数传参。</p> <h2 id="html"><a href="#html" aria-hidden="true" class="header-anchor">#</a> HTML</h2> <h3 id="语义化怎么理解？"><a href="#语义化怎么理解？" aria-hidden="true" class="header-anchor">#</a> 语义化怎么理解？</h3> <p>语义化是指根据内容的结构化选择合适的标签，通俗的讲就是用正确的标签做正确的事情</p> <h3 id="常见的行内元素、块级元素、空元素有哪些？"><a href="#常见的行内元素、块级元素、空元素有哪些？" aria-hidden="true" class="header-anchor">#</a> 常见的行内元素、块级元素、空元素有哪些？</h3> <ol><li><strong>行内元素</strong>：span、img、input、a、select 等等</li> <li><strong>块级元素</strong>：div、p、h1-6、ul、li、</li> <li><strong>空元素</strong>：br、hr、img、input、link、meta</li></ol> <h3 id="canvas-和-svg-有什么区别？"><a href="#canvas-和-svg-有什么区别？" aria-hidden="true" class="header-anchor">#</a> Canvas 和 SVG 有什么区别？</h3> <p><strong>Canvas</strong></p> <ol><li><strong>定义</strong>：Canvas 画布是基于 HTML5 的 canvas 标签，是以像素作为渲染单位，不支持矢量缩放</li> <li><strong>特点</strong>：
<ul><li>依赖分辨率</li> <li>不支持事件处理器</li> <li>较弱的文本渲染能力</li> <li>适合图像密集型的游戏应用</li> <li>能够以 png、jpg 等格式保存结果图像</li></ul></li></ol> <p><strong>Svg</strong></p> <ol><li><strong>定义</strong>：SVG 可缩放矢量图形是基于可扩展标记语言 XML 描述的2D图形语言</li> <li><strong>特点</strong>：
<ul><li>不依赖分辨率</li> <li>支持事件处理器（因为基于 XML，说明 DOM 中每个元素都是可用的）</li> <li>适合带有大型渲染区域的应用，如地图</li> <li>不适合游戏应用</li> <li>复杂度高会减慢渲染速度（过度使用 DOM）</li></ul></li></ol> <h3 id="html5-的-drag-api"><a href="#html5-的-drag-api" aria-hidden="true" class="header-anchor">#</a> HTML5 的 drag API</h3> <p>被拖放元素 A、目标元素 B</p> <ol><li><strong>dragstart</strong>：事件主体是A，在开始拖放A时触发</li> <li><strong>drag</strong>：事件主体是A，正在拖放A时出发</li> <li><strong>dragenter</strong>：事件主体是B，是A进入B边界时触发</li> <li><strong>dragover</strong>：事件主体是B，是A在B内部移动时触发</li> <li><strong>dragleave</strong>：事件主体是B，是A离开B边界时触发</li> <li><strong>drop</strong>：事件主体是B，是A在B内部松开时触发</li> <li><strong>dragend</strong>：事件主体是A，在整个拖放操作结束时触发</li></ol> <h2 id="css"><a href="#css" aria-hidden="true" class="header-anchor">#</a> CSS</h2> <h3 id="对-css-sprites-的理解？"><a href="#对-css-sprites-的理解？" aria-hidden="true" class="header-anchor">#</a> 对 CSS Sprites 的理解？</h3> <p>CSS Sprites（精灵图）是一种技术，能够将多个小图片合并到一个图片中，然后使用 CSS 的 background-image 和 background-position 属性显示图片不同的部分</p> <p><strong>优点</strong>：<strong>性能优化</strong>，减少 HTTP 请求，减少图片大小，加快页面加载速度</p> <p><strong>缺点</strong>：<strong>维护成本较高</strong>，精灵图中每个小图的宽高都是不确定的，无法精确控制每个小图的精确位置</p> <p><strong>应用场景</strong>：适合图标、按钮、小装饰等小尺寸图像的整合应用</p> <h3 id="link-和-import-的区别？"><a href="#link-和-import-的区别？" aria-hidden="true" class="header-anchor">#</a> link 和 @import 的区别？</h3> <p>两者都是引用外部 css 资源的方式，区别如下：</p> <ol><li><p><strong>语法</strong>：</p> <ul><li><strong>link</strong>：是 XHTML 标签，除了加载 CSS 外，还可以定义 RSS、rel 连接属性、引用外部文件等</li> <li><strong>@import</strong>：是 CSS 规则，只能用于加载 CSS，不支持 IE 浏览器，需要做兼容处理</li></ul></li> <li><p><strong>位置</strong>：</p> <ul><li><strong>link</strong>：位于 HTML 的 head 标签中</li> <li><strong>@import</strong>：必须在 CSS 文件的开头使用，不能再任何规则或条件规则如 @media 后使用</li></ul></li> <li><p><strong>加载方式</strong>：</p> <ul><li><strong>link</strong>：使用 link 引入的 css 文件会与 HTML 文档同步加载，有助于提高页面加载速度，并且可以通过 JS 控制加载顺序</li> <li><strong>@import</strong>：会在页面加载完成后，按顺序加载 css 文件，多个 @import 可能会导致页面闪烁</li></ul></li> <li><p><strong>媒体类型</strong>：</p> <ul><li><strong>link</strong>：link 标签可以包含 @media 属性，可以根据屏幕宽度等条件加载不同的 css 文件</li> <li><strong>@import</strong>：不支持 @media 属性，但可以在 css 文件中使用 @media</li></ul></li> <li><p><strong>兼容性</strong>：</p> <ul><li><strong>link</strong>：在所有浏览器中都广泛支持</li> <li><strong>@import</strong>：在现代浏览器中支持，低版本的浏览器需要做特殊处理</li></ul></li> <li><p><strong>样式覆盖</strong>：</p> <ul><li><strong>link</strong>：多个 link 的优先级取决于在 HTML 中的顺序</li> <li><strong>@import</strong>：多个 @import 的优先级取决于在 css 文件中的顺序，后声明的覆盖前面的</li></ul></li> <li><p><strong>HTTP请求</strong>：</p> <ul><li><strong>link</strong>：使用 link 标签引入的 css 文件只会产生一个 HTTP 请求</li> <li><strong>@import</strong>：如果一个 css 文件中有多个 @import，每个 @import 都可能产生额外的 HTTP请求</li></ul></li> <li><p><strong>支持JS操作DOM</strong>：</p> <ul><li><strong>link</strong>：link 标签是 HTML 元素，支持 JS 操作 DOM
<strong>@import</strong>：@import 是 css 规则，不支持 JS 操作 DOM</li></ul></li> <li><p><strong>应用场景</strong>：</p> <ul><li><strong>link</strong>：常规场景下推荐使用</li> <li><strong>@import</strong>：可复用的大型项目中可考虑使用</li></ul></li></ol> <p>20240724</p> <h3 id="什么是css-工程化？"><a href="#什么是css-工程化？" aria-hidden="true" class="header-anchor">#</a> 什么是CSS 工程化？</h3> <p>CSS 工程化是为了解决以下几类问题：</p> <ol><li><strong>宏观设计</strong>：如何组织 CSS 代码、如何拆分、模块结构怎么设计</li> <li><strong>编码优化</strong>：如何编写更好的 CSS 代码</li> <li><strong>构建</strong>：如何处理 CSS 代码才能让它的打包结果最优</li> <li><strong>可维护性</strong>：如何让 CSS 代码可维护</li></ol> <p><strong>三个关键方向解决以上问题</strong>：</p> <ul><li>预处理器（Less、Sass）</li> <li>工程化插件（PostCss）</li> <li>构建工具（Webpack和loader）</li></ul> <ol><li><strong>为什么需要使用预处理器？</strong></li></ol> <p><strong>预处理器</strong>其实就是 CSS 世界的轮子，支持我们编写<strong>类CSS代码</strong>，然后将它编译成 CSS代码，最后交给浏览器解析</p> <p><strong>预处理器提供这些能力</strong>：</p> <ul><li><strong>嵌套</strong>：高效反映不同 css 属性之间的层级关系</li> <li><strong>变量</strong>：方便我们定义和重用变量</li> <li><strong>计算函数</strong>：支持更强的可编程性</li> <li><strong>模块化</strong>：支持将 css 文件模块化，实现复用</li></ul> <ol start="2"><li><strong>PostCss 是什么？</strong></li></ol> <p><strong>PostCss</strong>是一个对 CSS 进行解析和处理的工具，作用对象是 CSS 本身，可以对 CSS 进行扩展和兼容</p> <p><strong>PostCss提供以下能力</strong>：</p> <ul><li><strong>自动添加前缀</strong>：当 css 适配低版本浏览器时，能增加浏览器前缀，确保 css 的兼容性</li> <li><strong>代码压缩和优化</strong>：能够压缩、优化 css 代码，移除无效代码</li></ul> <ol start="3"><li><strong>Webpack 怎么处理 CSS？</strong></li></ol> <p><strong>Webpack</strong>在 loader 的协助下处理 CSS 代码</p> <p><strong>关键loader</strong></p> <ul><li><strong>css-loader</strong>：用于解析 CSS 文件，并将 CSS 代码转换为 JavaScript 代码</li> <li><strong>style-loader</strong>：用于将 CSS 代码插入到 HTML 中</li></ul> <h3 id="css3-中-transition-和-animation-的属性分别有哪些？"><a href="#css3-中-transition-和-animation-的属性分别有哪些？" aria-hidden="true" class="header-anchor">#</a> CSS3 中 transition 和 animation 的属性分别有哪些？</h3> <p><strong>transition</strong>：用于定义元素在状态改变时从一个样式转换到另一个样式的过渡效果</p> <ol><li>指定属性：transition-property</li> <li>过渡时间:transition-duration</li> <li>过渡函数:transition-timing-function</li> <li>延迟时间：transition-delay</li></ol> <p><strong>animation</strong>：用于定义复杂的动画效果</p> <ol><li>指定key：animation-name</li> <li>动画时间：animation-duration</li> <li>动画函数：animation-timing-function</li> <li>延迟时间：animation-delay</li> <li>动画重复次数：animation-interation-cout</li> <li>动画方向：animation-direction</li> <li>动画非运行时效果：animation-fill-mode</li> <li>动画播放状态：animation-play-state</li></ol> <h3 id="什么是-css-盒模型？"><a href="#什么是-css-盒模型？" aria-hidden="true" class="header-anchor">#</a> 什么是 Css 盒模型？</h3> <ul><li>所有 HTML 元素可以看作盒子，CSS 盒模型本质上是一个盒子，封装周围的 HTML 元素，它包括：边距，边框，填充，和实际内容。</li></ul> <p>盒模型分为 2 种：</p> <ul><li><p>IE 盒模型 ：盒子的 width = border + padding + content 三个部分</p></li> <li><p>w3c 盒模型：盒子的 width = content</p></li></ul> <p>（但是 w3c 盒模型的 offsetWidth 是包含 border 和 padding 的）</p> <p>可以通过 box-sizing 设置应用哪种盒模型，border-box 表示 IE 盒模型，content-box 表示 W3C 盒模型</p> <h3 id="css-中有哪些选择器？优先级怎么处理？"><a href="#css-中有哪些选择器？优先级怎么处理？" aria-hidden="true" class="header-anchor">#</a> CSS 中有哪些选择器？优先级怎么处理？</h3> <ul><li><p>常见的选择器类型：</p> <ul><li>普通选择器：id 选择器、class 类选择器、标签选择器、伪类选择器、伪元素选择器等等</li> <li>组合器：包括后代选择器、子选择器、相邻兄弟选择器等等</li> <li>css3新增的选择器：层次选择器、伪类中的 first-of-type、nth-child(n)等等</li></ul></li> <li><p>优先级：每个选择器、每条规则都包含一个权重级别，构成优先级</p> <ul><li>权重：important &gt; 行内样式 &gt; id &gt; class/伪类/属性选择器 &gt; 标签/伪元素选择器</li></ul></li></ul> <p><strong>继承属性</strong>是指父元素设置的一些属性，后代元素会自动拥有这些属性，常见的几种类型：</p> <ol><li>字体系列属性：font-family、font-weight、font-size等等</li> <li>文本系列属性：text-indent、text-align、line-height等等</li> <li>元素可见性：visibility</li></ol> <h3 id="伪类和伪元素有什么区别？"><a href="#伪类和伪元素有什么区别？" aria-hidden="true" class="header-anchor">#</a> 伪类和伪元素有什么区别？</h3> <ul><li>书写上，规定要求伪类选择器使用一个冒号，伪元素选择器使用两个冒号</li> <li>表现上，伪类选择器应用的元素是真实存在文档树中，只是需要符合特定状态或特性的元素；而伪元素选择器是用于创建或样式化文档树中不存在的元素，并不存在于文档树中</li> <li>使用上，同一个选择器，伪类可以使用多个，而伪元素只能使用一个</li></ul> <h3 id="em-px-rem-vh-vw-这些单位有什么区别？"><a href="#em-px-rem-vh-vw-这些单位有什么区别？" aria-hidden="true" class="header-anchor">#</a> em/px/rem/vh/vw 这些单位有什么区别？</h3> <p><strong>px</strong>：表示像素，每个像素代表屏幕上的一个点，不同分辨率的设备，1px代表不同的物理尺寸</p> <p><strong>em</strong>：em 是相对单位，相对于当前对象字体大小，默认值为1em=16px（浏览器默认字体大小）</p> <p><strong>rem</strong>：rem 是相对单位，相对于 HTML 根元素的字体大小</p> <p><strong>vw、vh</strong>：vw和vh都是相对单位，根据窗口的宽度或高度分成100等份，100vw就表示满宽</p> <h3 id="设备像素、css像素、设备独立像素、dpr、ppi-之间有什么区别？"><a href="#设备像素、css像素、设备独立像素、dpr、ppi-之间有什么区别？" aria-hidden="true" class="header-anchor">#</a> 设备像素、css像素、设备独立像素、dpr、ppi 之间有什么区别？</h3> <ol><li>设备像素：是物理屏幕上的最小可见单位</li> <li>CSS像素：是Web开发中使用的相对单位，用于在网页上布局元素</li> <li>设备独立像素(dip)：是一种逻辑像素单位，用于将 CSS 像素与实际渲染的设备像素进行关联</li> <li>设备像素比(dpr)：是设备的物理像素与CSS像素之间的比例，计算公式为：DPR = 物理像素 / CSS像素</li> <li>每英寸像素密度(ppi)：是屏幕分辨率的一个度量，表示每英寸长度内可以容纳多少个设备像素</li></ol> <h3 id="🌟-使用-css-隐藏元素有哪些？"><a href="#🌟-使用-css-隐藏元素有哪些？" aria-hidden="true" class="header-anchor">#</a> 🌟 使用 css 隐藏元素有哪些？</h3> <ul><li>display: none 引起浏览器重排重绘，元素上绑定的事件会失效</li> <li>visibility: hidden 引起重绘但不会重排 ，元素上绑定的事件会失效</li> <li>opacity: 0 引起重绘但不会重排，元素上绑定的事件仍能响应</li> <li>overflow: hidden</li></ul> <table><thead><tr><th style="text-align:center;">类型</th> <th style="text-align:center;">display:none</th> <th style="text-align:center;">visibility:hidden</th> <th style="text-align:center;">opacity:0</th></tr></thead> <tbody><tr><td style="text-align:center;">页面中</td> <td style="text-align:center;">不存在</td> <td style="text-align:center;">存在</td> <td style="text-align:center;">存在</td></tr> <tr><td style="text-align:center;">重排</td> <td style="text-align:center;">会</td> <td style="text-align:center;">不会</td> <td style="text-align:center;">不会</td></tr> <tr><td style="text-align:center;">重绘</td> <td style="text-align:center;">会</td> <td style="text-align:center;">会</td> <td style="text-align:center;">不一定,一般会</td></tr> <tr><td style="text-align:center;">自身绑定事件</td> <td style="text-align:center;">失效</td> <td style="text-align:center;">失效</td> <td style="text-align:center;">可触发</td></tr> <tr><td style="text-align:center;">transition</td> <td style="text-align:center;">不支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td></tr> <tr><td style="text-align:center;">子元素复原</td> <td style="text-align:center;">不能</td> <td style="text-align:center;">能</td> <td style="text-align:center;">不能</td></tr> <tr><td style="text-align:center;">被遮挡的元素触发事件</td> <td style="text-align:center;">能</td> <td style="text-align:center;">能</td> <td style="text-align:center;">不能</td></tr></tbody></table> <h3 id="🌟-以上隐藏元素的方式的区别？"><a href="#🌟-以上隐藏元素的方式的区别？" aria-hidden="true" class="header-anchor">#</a> 🌟 以上隐藏元素的方式的区别？</h3> <ul><li>display: none 该元素以及它的所有后代元素都会隐藏，不会占用空间，元素上绑定的事件失效，会引起重绘、回流</li> <li>visibility: hidden 隐藏元素，保留原来的位置，元素上绑定的事件失效，如果有子元素，会自动继承 visibility: hidden，修改 visible 后可显示子元素，并可在冒泡阶段响应事件（子元素 visible 的情况下），会引起重绘，但不会回流</li> <li>opacity: 0 设置透明度为 0 隐藏元素，保留原来的位置，元素上绑定的事件仍然有效，引起重绘，但不会回流</li> <li>补充：Transition 对<code>visibility</code>的变化有效，对 display: none 无效</li></ul> <h3 id="如何实现两栏布局，右侧自适应？三栏布局中间自适应呢？"><a href="#如何实现两栏布局，右侧自适应？三栏布局中间自适应呢？" aria-hidden="true" class="header-anchor">#</a> 如何实现两栏布局，右侧自适应？三栏布局中间自适应呢？</h3> <p><strong>两栏布局，右侧自适应</strong></p> <p>方式一：flex 布局</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.box</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.left</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.right</span> <span class="token punctuation">{</span> <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment">/* flex-grow: 1; flex-shrink: 1; flex-basis: 0%; */</span>
</code></pre></div><ul><li>flex-grow: 1 代表项目可以增长来占据容器中的剩余空间，0 代表不增长</li> <li>flex-shrink: 1 代表容器尺寸不足时项目会收缩变小，0 代表不收缩</li> <li>flex-basis: 0% 代表项目的基准大小为最小内容宽度，auto 代表自适应于内容</li></ul> <p>方式二：float 浮动布局</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.box</span> <span class="token punctuation">{</span> <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span> <span class="token comment">/* 清除浮动 */</span> <span class="token punctuation">}</span>
<span class="token selector">.left</span> <span class="token punctuation">{</span>  
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span> 
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>方式三：grid 布局</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.box</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> 200px auto<span class="token punctuation">;</span> <span class="token comment">/* 列固定宽度和自适应 */</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>三栏布局中间自适应</strong></p> <p>方式一：flex 布局</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.box</span> <span class="token punctuation">{</span> <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.left</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">.middle</span> <span class="token punctuation">{</span> <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment">/* flex-grow: 1; flex-shrink: 1; flex-basis: 0%; */</span>
<span class="token selector">.right</span> <span class="token punctuation">{</span> <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre></div><p>方式二：grid 布局</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.box</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> 200px auto 200px<span class="token punctuation">;</span> <span class="token comment">/* 列固定宽度和自适应 */</span>
<span class="token punctuation">}</span>
</code></pre></div><p>方式三：float 布局(不推荐)</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>middle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> /* 布局有要求 */
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.box</span> <span class="token punctuation">{</span> <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span> <span class="token comment">/* 清除浮动 */</span> <span class="token punctuation">}</span>
<span class="token selector">.left</span> <span class="token punctuation">{</span>  
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span> 
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.right</span> <span class="token punctuation">{</span>  
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span> 
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.middle</span> <span class="token punctuation">{</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token comment">/* 控制两边间距 */</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="🌟-什么是-grid-布局？"><a href="#🌟-什么是-grid-布局？" aria-hidden="true" class="header-anchor">#</a> 🌟 什么是 grid 布局？</h3> <p>grid 布局是指将一个区域划分为一个个网格，可以任意组合不同的网格，做出各种布局</p> <p>flex 是轴线布局，可以指定项目针对轴线摆放，是一种一维布局；</p> <p>grid 将容器分为<strong>行</strong>和<strong>列</strong>，指定项目所在的单元格，是一种二维布局，</p> <p><strong>常见关键字</strong>：</p> <ul><li>fr片段：Grid 支持自适应布局，使用 fr 单位来分配空间</li> <li>auto：自适应宽度</li> <li>auto-fill 自适应列数或行数</li> <li>span 横跨</li> <li>方法 repeat()重复</li> <li>方法 minmax()设置最大最小宽度</li></ul> <p><strong>常见属性</strong>：</p> <p>container 容器属性：</p> <ul><li>display: grid; 设置容器为 grid 布局</li> <li>grid-template-columns: 100px 100px 100px; 设置容器有三行</li> <li>grid-template-columns: 100px 100px 100px; 设置容器有三列
<ul><li>等价于 <code>repeat(3, 100px);</code></li> <li>或者容器宽度不确定，单元格确定，使用关键字 <strong>auto-fill</strong> 自动划分几列，每列 100px <code>repeat(auto-fill, 100px);</code></li> <li>或者平分三份，使用关键字 <strong>fr</strong>：<code>repeat(3,fr);</code></li> <li>或者中间自适应，使用关键字 <strong>auto</strong>：<code>fr auto fr;</code></li></ul></li> <li>grid-auto-flow: row; 设置容器先行后列，也可以先列后行 column</li> <li>justify-items: center; 设置单元格内容水平位置居中</li> <li>align-items: center; 设置单元格内容垂直位置居中</li></ul> <p>item 元素属性：</p> <ul><li>grid-row: <code>&lt;start-line&gt; / &lt;end-line&gt;</code>  设置上下网格线的起始数</li> <li>grid-column: <code>&lt;start-line&gt; / &lt;end-line&gt;</code> 设置左右网格线的起始数
<ul><li>使用关键字 <strong>span</strong>，表示横跨两个网格</li> <li>等价于： <code>grid-column-start: span 2;</code> 和 <code>grid-column-end: span 2;</code></li></ul></li> <li>order: 控制项目的排序顺序</li></ul> <h3 id="🌟-什么是-flex-布局？"><a href="#🌟-什么是-flex-布局？" aria-hidden="true" class="header-anchor">#</a> 🌟 什么是 flex 布局？</h3> <p>Flex 是 Flexible Box 的简写，意为弹性布局，适用于创建各种灵活和自适应的网页布局，常见的应用场景是设置元素水平垂直居中。</p> <p>Flex 布局主要根据两根轴线：主轴和交叉轴，主轴由 flex-direction 定义，交叉轴会垂直于主轴</p> <p><strong>常见的容器属性</strong>:</p> <p>容器属性：</p> <ul><li>display: flex; 设置容器为 flex 布局</li> <li>flex-direction: row; 设置主轴为水平方向，item 的布局方向也为水平</li> <li>flex-wrap 设置主轴是否换行</li> <li>justify-content 设置 item 在主轴方向的对齐方式</li> <li>align-items 设置 item 在交叉轴方向的对齐方式</li></ul> <p>item 属性：</p> <ul><li>flex: flex-grow flex-shrink flex-basis;
<ul><li>默认值：flex: 0 1 auto;
<ul><li>flex 容器有剩余空间时尺寸不会增长（flex-grow:0）</li> <li>flex 容器尺寸不足时尺寸会收缩变小（flex-shrink:1）</li> <li>尺寸自适应于内容（flex-basis:auto）</li></ul></li></ul></li></ul> <p><strong>flex-basis:auto 和 flex-basis: 0% 的区别</strong></p> <ul><li><p>flex-basis:auto 项目会首先尝试基于内容分配空间，然后根据 flex-grow 和 flex-shrink 调整大小</p></li> <li><p>flex-basis: 0% 项目会首先将所有项目设置为 0% 的宽度（或高度），然后根据 flex-grow 和 flex-shrink 的比例分配剩余空间</p></li> <li><p><strong>flex: initial;</strong> 等价于 flex: 0 1 auto; 🌟 常用</p> <ul><li>item 尺寸不会增长但可以收缩变小 (flex-grow:0) 、(flex-shrink:1)</li> <li>item 尺寸自适应于内容 (flex-basis:auto)</li></ul></li> <li><p><strong>flex: 0;</strong> 等价于 flex: 0 0 0%；❌ 较少使用</p> <p>（场景：表现为 item 内容宽度, 而不是设置的 width）</p> <ul><li>item 尺寸不会增长也不收缩变小 (flex-grow:0) 、(flex-shrink:0)</li> <li>item 尺寸为最小内容宽度(flex-basis: 0%)</li></ul></li> <li><p><strong>flex: none;</strong> 等价于 flex 0 0 auto；🌟 常用</p> <p>（场景：当 item 的宽度就是 width 大小，且内容永远不会换行，则适合使用<code>flex:none</code>）</p> <ul><li>item 尺寸不会增长也不会收缩变小 (flex-grow:0) 、(flex-shrink:0)</li> <li>item 尺寸自适应于内容 (flex-basis:auto) 不会换行</li></ul></li> <li><p><strong>flex: 1;</strong> 等价于 flex: 1 1 0%；🌟 常用</p> <p>（场景：当希望 item 充分利用剩余空间，同时不会侵占其他元素应有的宽度的时候）</p> <ul><li>item 尺寸可以放大也可以缩小 (flex-grow:1) 、(flex-shrink:1)</li> <li>item 尺寸以最小内容宽度为基础放大或缩小(flex-basis: 0%)</li></ul></li> <li><p><strong>flex: auto;</strong> 等价于 flex 1 1 auto；❌ 较少使用</p> <p>（场景：当希望元素充分利用剩余空间，但是各自的尺寸按照各自内容进行分配的时候）</p> <ul><li>item 尺寸可以放大也可以缩小 (flex-grow:1) 、(flex-shrink:1)</li> <li>item 尺寸自适应于内容 (flex-basis:auto)</li></ul></li></ul> <p><img src="/Notebook/assets/img/WechatIMG5111.5c88f355.png" alt=""></p> <p><strong>flex 单值语法</strong>：</p> <ul><li>flex number: flex number 1 0</li> <li>flex: initial: flex 0 1 auto</li> <li>flex: auto: flex 1 1 auto</li> <li>flex: none: flex 0 0 auto</li></ul> <p><strong>flex 双值语法</strong>:</p> <p>第一个值为一个无单位数，并且它会被当作 <code>&lt;flex-grow&gt;</code> 的值。第二个值为以下之一：</p> <ul><li>一个无单位数：它会被当作 <code>&lt;flex-shrink&gt;</code> 的值。</li> <li>一个有效的宽度值: 它会被当作 <code>&lt;flex-basis&gt;</code> 的值。</li></ul> <p><strong>flex 三值语法</strong>:</p> <ul><li>第一个值必须为一个无单位数，并且它会被当作 <code>&lt;flex-grow&gt;</code> 的值。</li> <li>第二个值必须为一个无单位数，并且它会被当作 <code>&lt;flex-shrink&gt;</code> 的值。</li> <li>第三个值必须为一个有效的宽度值， 并且它会被当作 <code>&lt;flex-basis&gt;</code> 的值。</li></ul> <h3 id="🌟-position-有哪些属性？"><a href="#🌟-position-有哪些属性？" aria-hidden="true" class="header-anchor">#</a> 🌟 position 有哪些属性？</h3> <ul><li><p>static，静态定位，元素出现在正常的流中</p></li> <li><p>absolute 绝对定位，相对于 static 以外的第一个父元素定位，脱离文档流</p></li> <li><p>relative 相对定位</p></li> <li><p>fixed 固定定位，相对于浏览器窗口定位，脱离文档流</p></li> <li><p>inherit 从父元素继承 position 属性</p> <p>（在文档流中，元素按照其在 HTML 中的先后位置至上而下布局）</p></li></ul> <h3 id="🌟-display-有哪些属性？"><a href="#🌟-display-有哪些属性？" aria-hidden="true" class="header-anchor">#</a> 🌟 display 有哪些属性？</h3> <ul><li>none 元素不会显示</li> <li>block 设置为块级元素，前后带有换行符（常见有 div p h 标题 ol ul 可以设置宽高）</li> <li>inline 设置为内联元素，前后没有换行符（常见有 span label img label，不能设置宽高）</li> <li>inline-block 行内块元素（可以设置宽高）</li> <li>flex 设为弹性布局</li> <li>inherit 从父元素中继承 display 属性</li></ul> <h3 id="sass-和-less-的区别？"><a href="#sass-和-less-的区别？" aria-hidden="true" class="header-anchor">#</a> Sass 和 Less 的区别？</h3> <ul><li>两者都是 css 的预处理器，预处理器定义了一种专门的编程语言，提供使用变量、函数、混入、嵌套、运算等语法</li> <li>环境上：Sass 的安装需要安装 Ruby 环境，Less 基于 JavaScript，Sass 是通过服务端处理，Less 是通过客户端处理的，解析上 Less 会慢一些</li> <li>变量使用的符号不同：sass 使用 $、less 使用 @</li></ul> <h3 id="说说对-css-预编语言的理解，以及它们之间的区别？"><a href="#说说对-css-预编语言的理解，以及它们之间的区别？" aria-hidden="true" class="header-anchor">#</a> 说说对 CSS 预编语言的理解，以及它们之间的区别？</h3> <p>CSS 预编语言是一种在浏览器解析CSS前通过<strong>预处理器</strong>进行处理的CSS扩展语言。它们允许开发者使用变量、条件语句、循环、函数等等特性来编写样式。</p> <p><strong>常见的CSS预编语言有</strong>：</p> <ol><li><strong>Sass</strong>：支持变量、嵌套规则、混合（mixins，类似于函数）、继承和其它高级功能</li> <li><strong>Less</strong>：支持变量、混合、操作和函数等</li> <li><strong>Stylus</strong>：支持变量、可重用语句、继承、函数等</li></ol> <table><thead><tr><th style="text-align:center;">类型</th> <th style="text-align:center;">Sass</th> <th style="text-align:center;">Less</th> <th style="text-align:center;">Stylus</th></tr></thead> <tbody><tr><td style="text-align:center;">语法</td> <td style="text-align:center;">.scss 或 .sass</td> <td style="text-align:center;">.less</td> <td style="text-align:center;">.stylus</td></tr> <tr><td style="text-align:center;">变量定义</td> <td style="text-align:center;">$符号</td> <td style="text-align:center;">@符号</td> <td style="text-align:center;">变量名</td></tr> <tr><td style="text-align:center;">编译方式</td> <td style="text-align:center;">编译器</td> <td style="text-align:center;">编译器</td> <td style="text-align:center;">直接解析</td></tr> <tr><td style="text-align:center;">函数</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td></tr> <tr><td style="text-align:center;">混入</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td> <td style="text-align:center;">支持</td></tr></tbody></table> <p>20240725</p> <h3 id="怎么让chrome支持小于12px-的文字？"><a href="#怎么让chrome支持小于12px-的文字？" aria-hidden="true" class="header-anchor">#</a> 怎么让Chrome支持小于12px 的文字？</h3> <p>默认情况下，Chrome浏览器的最小字体大小限制为12px，可通过以下方式绕开限制：</p> <ol><li>使用缩放比例：<code>transform: scale(0.8)</code>，缺点是可能会模糊失真</li> <li>使用zoom：<code>zoom: 0.8</code>，缺点是浏览器容易不兼容</li> <li>使用 -webkit-text-size-adjust：<code>-webkit-text-size-adjust: none</code>，禁用浏览器对最小字体的限制</li> <li>使用图片替代</li></ol> <h3 id="解决-1px-问题的方案有哪些？"><a href="#解决-1px-问题的方案有哪些？" aria-hidden="true" class="header-anchor">#</a> 解决 1px 问题的方案有哪些？</h3> <p><strong>1px问题</strong>通常指的是在移动设备上，由于屏幕的高像素密度，CSS中的1像素在屏幕上看起来非常细或非常粗，也可能会消失或者变得不明显</p> <p><strong>原因</strong>： CSS 中的 1px 与移动过设备的 1px 有比例关系：window.devicePixelRatio = 设备的物理像素 / CSS像素</p> <p>devicePixelRatio = 2，代表这个设备设备上会用<strong>2个物理像素单元</strong>进行渲染，因此实际效果会比 1px 要粗</p> <p><strong>解决方案</strong>：</p> <ol><li><strong>媒体查询</strong>：使用 media 根据不同的设备像素比 devicePixelRadio 设置不同的样式</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@media</span> only screen and <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span>2<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.element</span> <span class="token punctuation">{</span>
    <span class="token property">border-width</span><span class="token punctuation">:</span> 0.5px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li><strong>缩放方案</strong>：通过设置 trasform: scale() 对元素进行缩放</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.element</span> <span class="token punctuation">{</span>
  <span class="token property">border-width</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li><strong>使用SVG</strong>：使用 SVG 绘制 1px 的线，因为 SVG 是矢量图形，可以在不同分辨率屏幕上保持清晰</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>100%<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>0 0 100 1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">preserveAspectRatio</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>none<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>line</span> <span class="token attr-name">x1</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y1</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">x2</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y2</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke-width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="4"><li><strong>使用伪元素</strong>：使用伪元素，通过伪元素的边框设置为1px，再缩放</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.element::bofore</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #222<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="怎么使用-css-画一个三角形？"><a href="#怎么使用-css-画一个三角形？" aria-hidden="true" class="header-anchor">#</a> 怎么使用 CSS 画一个三角形？</h3> <p>方式一：使用border，上右下左，向哪边的border-width设置0,反方向设置颜色，</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 向上的三角形 */</span>
<span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>
  <span class="token property">border-width</span><span class="token punctuation">:</span> 0 25px 25px 25px<span class="token punctuation">;</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> transparent transparent blue transparent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 向左的三角形 */</span>
<span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>
  <span class="token property">border-width</span><span class="token punctuation">:</span> 25px 25px 25px 0<span class="token punctuation">;</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> transparent blue transparent transparent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>方式二：使用clip-path的polygon函数，入参分别是各坐标点</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 向下的三角形 */</span>
<span class="token punctuation">{</span>
  <span class="token property">clip-path</span><span class="token punctuation">:</span> <span class="token function">polygon</span><span class="token punctuation">(</span>0 0<span class="token punctuation">,</span> 100% 0<span class="token punctuation">,</span> 50% 50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>方式三：使用transform的rotate函数转换方向</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 原本是向上的三角形，经过rotate后变成 向下的三角形 */</span>
<span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>
  <span class="token property">border-width</span><span class="token punctuation">:</span> 0 25px 25px 25px<span class="token punctuation">;</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> transparent transparent blue transparent<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>180deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="如何使用css完成视差滚动效果"><a href="#如何使用css完成视差滚动效果" aria-hidden="true" class="header-anchor">#</a> 如何使用css完成视差滚动效果?</h3> <ol><li>使用 background-attachment，作用是设置背景图像是否固定或者随着页面的其余部分滚动</li> <li>使用 trancform: translate3D，原理如下：</li></ol> <ul><li>容器设置 transform-style: preserve-3d 和 persperctive: xpx，处于这个容器的子元素就将位于3D空间中</li> <li>子元素设置不同的 transform: translateZ() 不同元素在3D的Z轴方向距离屏幕的距离就不一样</li> <li><a href="https://juejin.cn/post/7087766484587380767" target="_blank" rel="noopener noreferrer">参考资料<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="什么是-bfc？"><a href="#什么是-bfc？" aria-hidden="true" class="header-anchor">#</a> 什么是 BFC？</h3> <p>BFC：块级格式化上下文，<u>是一个独立的渲染区域，子元素不会影响到外面布局</u>。</p> <p><strong>产生BFC的场景</strong>：</p> <ul><li>元素设置浮动：float 属性不为 none</li> <li>元素设置绝对定位：position 为 absolute 或 fixed</li> <li>display 为 inline-block, table-cell, table-caption, flex, inline-flex</li> <li>overflow 不为 visible。</li></ul> <p><strong>BFC特点</strong>：</p> <ul><li>垂直方向，自上而下排列，与文档流的排列方式一致</li> <li>BFC 中上下两个相邻容器的 margin 会重叠</li> <li>计算 BFC 的高度时，需要计算浮动元素的高度</li> <li>BFC 是独立的容器，容器内部元素不影响外部元素</li></ul> <p><strong>应用</strong>：</p> <ul><li>清除元素内部浮动：确保父元素的高度包含其浮动子元素</li> <li>解决外边距合并(塌陷)问题：将两个元素变成两个 BFC</li> <li>实现右侧自适应的盒子</li></ul> <h3 id="如何获取元素的宽高属性？"><a href="#如何获取元素的宽高属性？" aria-hidden="true" class="header-anchor">#</a> 如何获取元素的宽高属性？</h3> <ul><li>vue 中通过 ref 获取 dom 元素</li> <li>原生 js 获取 dom 元素</li> <li>window.getComputedStyle(dom)</li> <li>getBoundingCliClientRect()</li></ul> <h3 id="🌟-如何实现垂直居中布局？"><a href="#🌟-如何实现垂直居中布局？" aria-hidden="true" class="header-anchor">#</a> 🌟 如何实现垂直居中布局？</h3> <ul><li>flex 布局，设置容器 display: flex; align-items: center; justify-content: center;</li> <li>grid 布局，设置容器 display: grid; place-items: center;</li> <li>绝对定位， display: absolute; margin: auto; top、bottom、left、right 都设为 0</li> <li>绝对定位，display: absolute; top:50%; left:50%;，transform:translate(-50%, -50%);</li></ul> <h3 id="你说一下-css3-的新特性有哪些？"><a href="#你说一下-css3-的新特性有哪些？" aria-hidden="true" class="header-anchor">#</a> 你说一下 CSS3 的新特性有哪些？</h3> <p>过渡 transition、动画 animation、形状转换 transform、阴影 box-shadow、渐变 gradient、背景相关 background-origin、background-size</p> <ul><li>过渡：<strong>transition</strong>：width, 0.5s, ease, 0.3s （变化的 css 属性，过度时间，效果曲线，延迟时间）</li> <li>动画：<strong>animation</strong>：动画名称、周期时间、效果曲线、延迟时间、播放次数、是否反向播放、是否暂停动画（通过 @keyframes 方式创建动画）</li> <li>形状转换：<strong>transform</strong>：对元素进行 rotate 旋转、sacle 缩放、translate 移动、skew 倾斜操作</li> <li>阴影：<strong>box-shadow</strong>：水平位置 垂直位置 模糊距离 阴影大小 阴影颜色 开始方向</li> <li>渐变：<strong>linear-gradient</strong>：线性渐变、<strong>radial-gradient</strong>： 径向渐变</li> <li>背景属性：<strong>background-origin</strong>、<strong>background-size</strong>等等</li></ul> <h3 id="如何实现单行-多行文本溢出的省略样式？"><a href="#如何实现单行-多行文本溢出的省略样式？" aria-hidden="true" class="header-anchor">#</a> 如何实现单行/多行文本溢出的省略样式？</h3> <p><strong>单行文本</strong></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">div</span> <span class="token punctuation">{</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
  <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>多行文本</strong></p> <p>方式一：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span>
  <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>
  <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span> <span class="token comment">/* 设置超过三行就省略 */</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span> <span class="token comment">/* 固定宽度，根据需要调整 */</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="css-性能优化？"><a href="#css-性能优化？" aria-hidden="true" class="header-anchor">#</a> CSS 性能优化？</h3> <ul><li>内联首屏关键 css ：外部 css 文件需要等 html 下载完后加载，但缺点是内联后的 CSS 不会进行缓存</li> <li>异步加载 css：将 link 元素的 ref = “preload”，使得浏览器异步加载 CSS 文件但不解析，直到加载完成并将修改还原，然后开始解析。</li> <li>文件压缩：文件的大小会直接影响浏览器的加载速度</li> <li>去除无用的 css</li> <li>有选择的使用选择器（css 选择器的匹配规则是从 右到左）</li> <li>减少回流与重绘</li> <li>不要使用 @import，使用@import 引入 CSS 会影响浏览器的并行下载，尽量使用 link</li></ul> <p>CSS 优化性能分为以下几类：</p> <ol><li><p><strong>加载性能</strong></p> <ul><li><strong>进行css压缩</strong>：利用构建工具将 CSS 文件压缩合并，减少文件体积</li> <li><strong>减少使用 @import，建议使用 link</strong>：使用link会在页面加载时同步加载</li></ul></li> <li><p><strong>选择器性能</strong></p> <ul><li><strong>避免使用通配符</strong>：通配符会匹配所有元素，会造成回流和重绘，并且会阻塞页面渲染</li> <li><strong>高效选择器使用</strong>：CSS 选择符是从右到左进行匹配的，要尽可能的缩小选择器的范围</li> <li><strong>避免过深的嵌套规则</strong></li></ul></li> <li><p><strong>渲染性能</strong></p> <ul><li><strong>内联首屏渲染的CSS，确保优先加载</strong>，避免因CSS阻塞页面渲染</li> <li><strong>慎重使用高性能属性</strong>：如浮动、定位</li> <li><strong>尽量减少页面重排、重绘</strong></li> <li><strong>使用媒体查询加载适当资源</strong></li></ul></li></ol> <h3 id="重绘与回流"><a href="#重绘与回流" aria-hidden="true" class="header-anchor">#</a> 重绘与回流</h3> <p><strong>重绘</strong>是指当前 DOM 需要更改外观而不影响布局，比如改变 color 就为重绘</p> <p><strong>回流</strong>是指布局或几何属性需要改变</p> <p><strong>回流必定发生重绘</strong></p> <h3 id="如何避免发生重绘和回流？"><a href="#如何避免发生重绘和回流？" aria-hidden="true" class="header-anchor">#</a> 如何避免发生重绘和回流？</h3> <p>CSS 方面：</p> <ul><li>避免使用 table 布局（为什么）</li> <li>尽可能在 DOM 树的最末端改变 class</li> <li>避免设置多层内联样式</li> <li>将动画效果应用到 position 属性为 absolute 或 fixed 的元素上（因为脱离文档流）</li></ul> <p>JavaScript 方面：</p> <ul><li>避免频繁操作样式，最好一次性重写 style 属性</li> <li>避免频繁读取会引发回流/重绘的属性，如果需要多次使用，用一个变量缓存起来</li> <li>可以先将元素设为 display:none 操作结束后再显示出来，因为在 none 的元素上进行 DOM 操作不会引起回流和重绘</li> <li>避免频繁操作 DOM，可以使用文档片段 DocumentFragment，在它上面应用 DOM 操作，最后再将它添加到文档中
（<strong>DocumentFragment 不是真实 DOM 树的一部分，它的变化不会引起 DOM 树的重新渲染的操作(reflow)</strong>）</li></ul> <h3 id="为什么-css-选择器的匹配规则是从右到左？"><a href="#为什么-css-选择器的匹配规则是从右到左？" aria-hidden="true" class="header-anchor">#</a> 为什么 CSS 选择器的匹配规则是从右到左？</h3> <p>因为从右向左的匹配在第一步就筛选掉了大量的不符合条件的右侧节点；而从左向右的匹配规则的性能都浪费在了失败的查找上面。</p> <h3 id="层叠上下文？"><a href="#层叠上下文？" aria-hidden="true" class="header-anchor">#</a> 层叠上下文？</h3> <p>层叠上下文定义了元素如何在Z轴上堆叠，以及元素之间的遮挡关系</p> <p><strong>创建层叠上下文</strong></p> <ul><li>当容器的 z-index 不为 auto 且包含 position 为 relative/absolute/fixed 的定位元素</li> <li>opacity 值小于1的元素</li> <li>transform、filter、clip-path 等属性非默认值的元素</li></ul> <h2 id="node"><a href="#node" aria-hidden="true" class="header-anchor">#</a> Node</h2> <p>特点</p> <ul><li>异步 IO</li> <li>事件驱动</li> <li>单线程</li> <li>跨平台</li></ul> <p>单线程的缺点</p> <ul><li>无法利用多核 cpu</li> <li>错误会引起整个应用的退出</li> <li>大量计算占用 cpu 会导致无法继续调用异步 IO</li></ul> <p>可以做什么？</p> <p>服务器、命令行工具、客户端</p> <p>前端工程化</p> <h3 id="koa"><a href="#koa" aria-hidden="true" class="header-anchor">#</a> koa</h3> <p>洋葱模型源码实现</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token parameter">middleware<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> middleware<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 最后一个中间件返回resolve的promise</span>
      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> fn <span class="token operator">=</span> middleware<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 调用next才会触发async2</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">easyCompose</span><span class="token punctuation">(</span><span class="token punctuation">[</span>async1<span class="token punctuation">,</span> async2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,2,3,4</span>

<span class="token comment">// 实际上，就用compose函数转成</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 这个.then是上面那个Promise.resolve().then返回来的promise</span>
      <span class="token comment">// 如果上面那个reject了，里面回调不会执行</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果看<code>.then</code>不是很好理解，看<code>await</code>版</p> <div class="language-js extra-class"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这样就能理解所谓的洋葱模型了</p> <h2 id="算法"><a href="#算法" aria-hidden="true" class="header-anchor">#</a> 算法</h2> <h3 id="树相关"><a href="#树相关" aria-hidden="true" class="header-anchor">#</a> 树相关</h3> <p><strong>满二叉树</strong>：除了叶子节点外，每个节点都有左右子节点，假设深度为 h，总节点数为 2^
h - 1</p> <p><strong>完全二叉树</strong>：除了最后一层，其他层节点数都达到最大，最后一层的节点都靠左排列，并且最后一层的叶子节点数达到最大</p> <p><strong>二叉搜索树</strong>：左子树的每个节点值小于根节点，右子树的每个节点值大于根节点（左小右大）</p> <p><strong>递归遍历 DFS</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">traverse</span> <span class="token operator">=</span> <span class="token parameter">root</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token comment">// 前序遍历 进入节点就会执行</span>
  <span class="token function">traverse</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
  <span class="token comment">// 中序遍历 左子树遍历完全后，右子树遍历前执行</span>
  <span class="token function">traverse</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
  <span class="token comment">// 后序遍历 左右子树遍历完全后指定</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>层序遍历 BFS</strong></p> <p>特点：层序遍历是一层一层，从左到右的遍历二叉树节点</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> traverse <span class="token operator">=</span> root <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span>root<span class="token punctuation">]</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> cur <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 推出顶部元素</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'访问 cur 节点'</span><span class="token punctuation">,</span> cur<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      quene<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>right<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>二叉树解题思路</strong></p> <ol><li><strong>遍历</strong>：配合外部变量，通过遍历一遍二叉树得到答案</li> <li><strong>分解问题</strong>：定义一个递归函数，通过子问题（子树）的答案推导出原问题的答案</li></ol> <p><strong>求二叉树的最大深度</strong>是指<strong>根节点</strong>到最远的叶子节点的最长路径上的节点数（包含根节点）</p> <p><strong>求二叉树的直径</strong>是指<strong>任意两个节点</strong>的路径长度，不一定经过根节点</p> <h3 id="深度优先遍历"><a href="#深度优先遍历" aria-hidden="true" class="header-anchor">#</a> 深度优先遍历</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">&quot;1-1&quot;</span><span class="token punctuation">,</span>
        children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            title<span class="token punctuation">:</span> <span class="token string">&quot;1-1-1&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            title<span class="token punctuation">:</span> <span class="token string">&quot;1-1-2&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">&quot;1-2&quot;</span><span class="token punctuation">,</span>
        children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            title<span class="token punctuation">:</span> <span class="token string">&quot;1-2-1&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">&quot;2-1&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 递归版本</span>
<span class="token keyword">function</span> <span class="token function">deepFirstSearch1</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">_search</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
      data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> children <span class="token punctuation">}</span> <span class="token operator">=</span> node<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>children <span class="token operator">&amp;&amp;</span> children<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">_search</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> list<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="广度优先遍历"><a href="#广度优先遍历" aria-hidden="true" class="header-anchor">#</a> 广度优先遍历</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">&quot;1-1&quot;</span><span class="token punctuation">,</span>
        children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            title<span class="token punctuation">:</span> <span class="token string">&quot;1-1-1&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            title<span class="token punctuation">:</span> <span class="token string">&quot;1-1-2&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">&quot;1-2&quot;</span><span class="token punctuation">,</span>
        children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            title<span class="token punctuation">:</span> <span class="token string">&quot;1-2-1&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        title<span class="token punctuation">:</span> <span class="token string">&quot;2-1&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 广度优先是按一层层来遍历，每层搜索完再搜索下一层</span>
<span class="token keyword">function</span> <span class="token function">BreadthFirst</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 用队列解决，先进先出</span>

  Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> item <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> children <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>children <span class="token operator">&amp;&amp;</span> children<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>queue<span class="token punctuation">,</span> <span class="token operator">...</span>children<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> list<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="排序"><a href="#排序" aria-hidden="true" class="header-anchor">#</a> 排序</h3> <p>冒泡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 默认升序</span>
<span class="token keyword">function</span> <span class="token function">bubblesort</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;up&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 不改变原数组</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;数据源必须为数组!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;up&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>快排</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">quickSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> arr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> pivot <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 基数</span>
  <span class="token comment">// 数组长度大于1才遍历</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> pivot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      left<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 小的放左边</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      right<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 大的放右边</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">quickSort</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> pivot<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token function">quickSort</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="链表"><a href="#链表" aria-hidden="true" class="header-anchor">#</a> 链表</h3> <p>单向链表</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 链表中的节点
 */</span>
<span class="token keyword">function</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 节点中的数据</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> element<span class="token punctuation">;</span>
  <span class="token comment">// 指向下一个节点的指针</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">LinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> head <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 当前的节点</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">size</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">head</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> head<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      head <span class="token operator">=</span> node<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> currentNode <span class="token operator">=</span> head<span class="token punctuation">;</span>

      <span class="token keyword">while</span> <span class="token punctuation">(</span>currentNode<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      currentNode<span class="token punctuation">.</span>next <span class="token operator">=</span> node<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    length<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> currentNode <span class="token operator">=</span> head<span class="token punctuation">;</span>
    <span class="token keyword">var</span> previousNode<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentNode<span class="token punctuation">.</span>element <span class="token operator">===</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      head <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>currentNode<span class="token punctuation">.</span>element <span class="token operator">!==</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        previousNode <span class="token operator">=</span> currentNode<span class="token punctuation">;</span>
        currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      previousNode<span class="token punctuation">.</span>next <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    length<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">isEmpty</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">indexOf</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> currentNode <span class="token operator">=</span> head<span class="token punctuation">;</span>
    <span class="token keyword">var</span> index <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>currentNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      index<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentNode<span class="token punctuation">.</span>element <span class="token operator">===</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> index<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">elementAt</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> currentNode <span class="token operator">=</span> head<span class="token punctuation">;</span>
    <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      count<span class="token operator">++</span><span class="token punctuation">;</span>
      currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> currentNode<span class="token punctuation">.</span>element<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">addAt</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> currentNode <span class="token operator">=</span> head<span class="token punctuation">;</span>
    <span class="token keyword">var</span> previousNode<span class="token punctuation">;</span>
    <span class="token keyword">var</span> currentIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      node<span class="token punctuation">.</span>next <span class="token operator">=</span> currentNode<span class="token punctuation">;</span>
      head <span class="token operator">=</span> node<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">&lt;</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        currentIndex<span class="token operator">++</span><span class="token punctuation">;</span>
        previousNode <span class="token operator">=</span> currentNode<span class="token punctuation">;</span>
        currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      node<span class="token punctuation">.</span>next <span class="token operator">=</span> currentNode<span class="token punctuation">;</span>
      previousNode<span class="token punctuation">.</span>next <span class="token operator">=</span> node<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    length<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">removeAt</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> currentNode <span class="token operator">=</span> head<span class="token punctuation">;</span>
    <span class="token keyword">var</span> previousNode<span class="token punctuation">;</span>
    <span class="token keyword">var</span> currentIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> index <span class="token operator">&gt;=</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      head <span class="token operator">=</span> currentIndex<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>currentIndex <span class="token operator">&lt;</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        currentIndex<span class="token operator">++</span><span class="token punctuation">;</span>
        previousNode <span class="token operator">=</span> currentNode<span class="token punctuation">;</span>
        currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      previousNode<span class="token punctuation">.</span>next <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    length<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> currentNode<span class="token punctuation">.</span>element<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="正则"><a href="#正则" aria-hidden="true" class="header-anchor">#</a> 正则</h2> <p>正则表达式的() [] {}有不同的意思。</p> <p>() 是为了提取匹配的字符串。表达式中有几个()就有几个相应的匹配字符串。</p> <p>(\s*)表示连续空格的字符串。</p> <p>[]是定义匹配的字符范围。比如 [a-zA-Z0-9] 表示相应位置的字符要匹配英文字符和数字。[\s*]表示空格或者*号。</p> <p>{}一般用来表示匹配的长度，比如 \s{3} 表示匹配三个空格，\s{1,3}表示匹配一到三个空格。</p> <p>(0-9) 匹配 '0-9′ 本身。 [0-9]_ 匹配数字（注意后面有 _，可以为空）[0-9]+ 匹配数字（注意后面有 +，不可以为空）{1-9} 写法错误。</p> <p>[0-9]{0,9} 表示长度为 0 到 9 的数字字符串。</p> <h2 id="项目经验"><a href="#项目经验" aria-hidden="true" class="header-anchor">#</a> 项目经验</h2> <h3 id="内存泄漏相关"><a href="#内存泄漏相关" aria-hidden="true" class="header-anchor">#</a> 内存泄漏相关</h3> <ul><li>模型系统使用了 iview 3.4.2 版本的 Split 组件，源码中进行了 resize 函数的监听，但没有在组件的 beforeDestroy 钩子函数中解绑。所以自己封装了一个 split-pane 组件，并优化了 trigger 宽度过大时引起的抖动问题（如果 trigger 宽度很大，在计算左侧 box 宽度时需要考虑鼠标点下的瞬间 x 点离 trigger box 的宽度 triggerOffset ）</li> <li>临沧系统上需要用到多种 echarts 图表展示，在切换图表类型时直接更新 option 的值会有历史数据的影响，所以需要调用 clear 方法清除实例上的组件和图表，页面跳转前，需要调用 dispose 将实例销毁</li></ul> <h3 id="项目构建相关"><a href="#项目构建相关" aria-hidden="true" class="header-anchor">#</a> 项目构建相关</h3> <ul><li>使用 <strong>webpack-bundle-analyzer</strong> 打包文件分析工具，对输出文件进行分析，哪些模块的占用体积较大，定向优化</li> <li>使用 <strong>DllPlugin 和 DllReferencePlugin</strong> 进行资源分包，比如 vue、vuex、vuerouter、pdfmake、jsencrypt</li> <li>使用 <strong>speed-measure-webpack-plugin</strong> 输出各 loader、plugin 的耗时信息，定位所需有优化的地方，比如代码、loader 配置
<ul><li>使用 include/exclude 优化 loader 命中，排除与当前 loader 无关的文件</li> <li>使用 extensions 优化文件命中，或者引入文件时主动添加文件后缀</li> <li>使用 modules 优化模块命中，moudules 的默认值是当前路径下的 [node_modules]，找不到时会逐层往上寻找，所以可以通过绝对路径制定 modules 的路径，减少寻找时间</li></ul></li> <li>使用 <strong>css-loader</strong> 缓存 loader 解析过的文件</li> <li>使用<strong>terser-webpack-plugin</strong> 开启多线程压缩 js 代码</li> <li>使用 webpack 的 <strong>copy</strong> 插件实现不同环境的配置文件替换，减少手动替换的操作</li></ul> <h3 id="首屏优化相关"><a href="#首屏优化相关" aria-hidden="true" class="header-anchor">#</a> 首屏优化相关</h3> <ul><li>路由<strong>懒加载</strong>，使用 import 方式加载路由组件，并配置 webpackChunkName 指定模块输出的 chunk 名称</li> <li>配合后端开启<strong>gzip 压缩</strong>，压缩前后大小为 5Mb、1.6Mb（详细看请求 JS 文件的 network 记录，响应头没有 <code>Content-Encoding:gzip</code>，证明后台没有开启 gzip）</li> <li>UI 库、工具库<strong>按需加载</strong></li> <li><strong>异步加载</strong> hjson 文件，不直接引入</li> <li>通过打包文件分析工具发现 jspdf、pdfmake、moment 的占用体积较大，jspdf 和 pdfmake 的功能重复，取一即可。针对 iview 中国际化语言使用的 moment.js 体积过大，可以将该模块下的语言全部忽略打包，改为手动引入中文包</li></ul> <h3 id="系统亮点"><a href="#系统亮点" aria-hidden="true" class="header-anchor">#</a> 系统亮点</h3> <ul><li><p>大文件从普通方式上传升级为 <strong>断点续传</strong>，可以控制上传进度，中途暂停</p></li> <li><p><strong>优化 json 数据格式化展示</strong>，支持自定义图标、并检查文件大小控制展开的层级</p></li> <li><p>实现流程图的<strong>撤销恢复</strong>功能，技术主要是 vuex，通过 store 存储流程图的 flowdata 对象，每次操作（移动或编辑节点），都将新的 flowdata push 进一个 allStep 数组，撤销则用 allStep.pop 推出最新的操作，flowdata 对象再根据是哪种操作进行赋值。撤销是先推出再赋值、恢复是先赋值后推出</p></li> <li><p>swagger 版本升级后，url 出现 <strong>零宽度空格</strong>，前端 copy 链接会把这串**&amp;#8203**也复制过去造成资源 404，解决办法是前端统一在请求拦截的地方，对 url 先进行 encodeURI 然后替换零宽度空格，然后再 decodeURI</p></li> <li><p>用 hjson 替代 json 配置，项目中大部分业务数据需要在前端写死配置，数量多了，json 配置的话不能用注释，那么维护起来就很麻烦，改用 hjson 后可以对每一条配置都标注信息，这样就容易很多</p></li> <li><p>优化 iview tree 渲染 500 节点时，会出现明显的卡顿，排查后发现，</p> <ul><li>每次节点的展开收起都是一次销毁重新渲染的过程 =&gt; 优化 增加一个状态记录当前节点是否已渲染，已渲染后改用 v-show 指令决定元素显隐，不再销毁重新渲染（子节点通过两个条件判断 v-show：childExpand，v-if：expand || childExpand）</li> <li>展开节点时过渡动画是作用在每一个子节点上的（动画效果包裹着每一个 tree-node） =&gt; 优化 动画只作用在需要过渡动画的元素上，也就是只作用在有子节点的 node 上，减少回流次数</li></ul></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">12/18/2024, 6:47:34 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Notebook/frontend-web/file.html" class="prev">
          文件处理
        </a></span> <span class="next"><a href="/Notebook/frontend-web/interview2.html">
          常见问题 2
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Notebook/assets/js/app.fae3116e.js" defer></script><script src="/Notebook/assets/js/3.8a90166b.js" defer></script><script src="/Notebook/assets/js/21.8d087c07.js" defer></script>
  </body>
</html>
